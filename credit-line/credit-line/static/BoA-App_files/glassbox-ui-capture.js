/*
 * rev. 19081 (2017-02-09)
 * Copyright (c) 2017 Clarisite http://www.clarisite.com
 */
window._cls_config = {
   reportURI: '/pa/global-assets/1.0/graphic/clr.gif',
   recordErrors: true,
   recordHovers: true,
   recordScrolls: true,
   recordMouseMoves: false,
   idleEventTimeInterval: -1,
   maskClassList:[
   	'tl-private',
   	'TL_NPI_L1',
   	'TL_NPI_L2'
   ],
   reportInterval: 10000,
}
!function(a,b,c){function d(){var a=[];this.add=function(b,c,d,e,f,g){this[f.toLowerCase()]={type:b,nullable:c,parser:d,name:f,required:g,validator:e},g&&a.push(f)},this.requiredFieldsMask=function(){for(var b={},c=0;c<a.length;c++)b[a[c]]=!0;return b}}function e(){this.errors=[],this.warnings=[]}function f(a){var b={},c=[];a=a||this,a.on=function(a,c,d){(b[a]=b[a]||[]).push([c,d])},a.off=function(a,d){a||(b={});for(var e=b[a]||c,f=e.length=d?e.length:0;f--;)d==e[f][0]&&e.splice(f,1)},a.emit=function(a){for(var d,e=b[a]||c,f=e.length>0?e.slice(0,e.length):e,g=0;d=f[g++];)d[0].apply(d[1],c.slice.call(arguments,1))}}function g(a){this.size=0,this.limit=a,this._keymap={}}function h(a,b,c,d){this.severity=a,this.code=b,this.count=c,d&&(this.msg=d)}function i(a,b,c){this.url=b,this.timestamp=c,this.type=a}function j(a,b){this.x=a,this.y=b}function l(a){this.map={},this.cookieName=a,this.readFromCookie()}function m(b,c,d,e){this.pageId=e,this.timestamp=c,this.type=b,this.element=d,this.report=!0,this.shouldEncodeValue=!0,this.dependent=!1,this.subPage=H.getHashFromUrl(a.location.href)}function n(a,b,c){this.element=a,this.message=b.length>0?b:"NONE",this.selector=c}function o(a){this.value=a}function p(a,b){try{if(!a.interception)return void(u.ajaxDebug&&H.trace("AjaxCall - missing cls xhr interception data for url: "+(a.responseURL||"")));this.xhr=a,this.timestamp=b,this.interception=a.interception,this.url=a.interception.url,this.method=a.interception.method}catch(a){console.log("Error in AjaxCall construction: "+a)}}function q(a,b,c){try{this.id=a,this.event=b,this.timestamp=c}catch(a){console.error("Error in WebSocketEventData construction: "+a)}}function r(a,b,c,d){try{this.id=a,this.direction=b,this.payload=c,this.timestamp=d}catch(a){console.error("Error in WebSocketFrameData construction: "+a)}}function s(a,b,c){function d(){var d=a.createElement("a");return d.href=c,d.hostname===b.hostname&&d.port===b.port&&d.protocol===b.protocol&&"file:"!==b.protocol}var e=!d(),f=e&&null===H.readCookie(s.READY_COOKIE)?s.STATE.INIT:s.STATE.READY,g=[],h=function(b){b&&(a.cookie=s.READY_COOKIE+"=;path=/;domain="+P.getDefaultDomain());var c=g;g=[],f=s.STATE.READY;for(var d=0;d<c.length;d++)c[d](b)};this.isRequired=function(){return e},this.isReady=function(){return f===s.STATE.READY},this.help=function(a,b){var d,e,i=[];if(f===s.STATE.READY)return H.warn("cors helper was called while in 'ready' state."),void h(b,!0);for(d in t.cookies)e=H.readCookie(t.cookies[d]),e&&i.push(t.cookies[d]+"="+e);if(i.length>0){if(g.push(b),f===s.STATE.HELPING)return;f=s.STATE.HELPING;var j=c+"_start?"+i.join("&"),k=a();k.onreadystatechange=function(){4===k.readyState&&(200===k.status?h(!0):(H.log("failed to execute CORS support request. statusCode:"+k.status),h(!1)))},k.open("GET",j,!0),k.withCredentials=!0,k.send()}else H.log("ERROR: could not retain cls cookies (was the TLD configured and detected correctly?)"),h(b)}}var t={};t.version="1.0.2",t.beaconVersion="2",t.detectorGlobalName="_detector","undefined"!=typeof a[t.detectorGlobalName]&&("undefined"!=typeof a.console&&"function"==typeof a.console.log&&console.log("WARNING[EyeView-1301]: detector script has been loaded more than once. Please fix to have a single detector loading. (Extra script loading will be ignored)"),t.multiple_loading_detected=!0),t.eventTypes=["mousedown","mouseup","touchstart","touchend","scroll","change","blur","focusout","keydown","submit","reset","load","unload","ajaxComplete","hashchange","popstate","focus","focusin","mouseenter","mousemove","error","beforeunload","resize"],t.snapshotApplicableEventType=["pageUpdate","change","mousedown","scroll","touchstart","blur","submit","drag","formValidationError","navigation","unload","beforeunload"],t.reportBase64URLs=!1,t.nobelEventTypes=["pageSnapshot"],t.encodeSelectors=!0,t.encodeEventTypes=!0,t.useClassesInSelectors=!1,t.repeatingElementSelector="!",t.encoding={numberBase:36,rootSelector:"-",delimiters:{versionPayload:";",pages:"~~~",events:"~~",eventParts:"~",pageIdEvents:"_"},domSnapshotPrefix:"D",valueEncodedPrefix:"E",valueNotEncodedPrefix:"N"},t.cookies={events:"_cls_events",session:"_cls_s",sub_session:"_cls_subs",visitor:"_cls_v",referrer:"_cls_referrer",robot:"_cls_bd",debuginfo:"_cls_di",supportMode:"_cls_sm"},t.maskingAttribute="cls_mask",t.detectorScript=b.currentScript||function(){var a=b.getElementsByTagName("script");return a.length>0?a[a.length-1]:null}();var u={};u.debugMode=!1,u.traceMode=!1,u.suppressMouseMovesDebug=!0,u.reportByPost=!1,u.timingMode=!1,u.useIdSelectors=!0,u.noIdSelectorsForClassNames=["skull_list"],u.noIdSelectorsForIDs=[],u.noIdSelectorsForAttrs=[],u.useNameInFormSelectors=!1,u.preferNamesInFormSelectors=!1,u.reportValidationErrors=!0,u.supportNativeAutoComplete=!1,u.recordEnterForInputs=!0,u.recordTypingAll=!1,u.recordTypingForAttrs=["bs-typeahead"],u.recordTypingForClasses=["tt-input"],u.recordTypingForIDs=[],u.ignorableElementIds=["cls_logger","cls_logger_tab"],u.idleEventTimeInterval=3e4,u.maxTimeForIdleEvent=42e4,u.validationValueForRenderTime=2e4,u.titleCharsLimit=150,u.recordAjaxCallsAnyway=!1,u.ajaxDebug=!1,u.reportVisualNames=!0,u.visualName={chatLimit:40,CLS_NAME_ATTR:"cls_vname",filterNamingByTagName:["script","style"],by:{title:!0,alt:!0,inlineText:!0,placeholder:!0,inputConsts:!0,inputButtonsValue:!0,name:!0,id:!0,parent:!0,child:!0},elementListToCheckParent:["img","span","div"],elementListToCheckChild:["button"],filterInlineTextByTagName:["div","span","td"],filterInlineTextByClassName:[]},u.maskList=[],u.maskClassList=[],u.recordErrors=!1,u.minDragPixels=10,u.botDetection=!0,u.reportDebugInfo=!0,u.DOMBeaconImg=!1,u.reportAllOnUnload=!1,u.maxReportsWithUnload=4,u.truncateEventsWithUnload=!0,u.recordScrolls=!1,u.dependentScroll=!0,u.minStallingScrollTime=3e3,u.scrollDebug=!1,u.recordMouseMoves=!1,u.mmRecordTimes=!1,u.mmDiluteMinPixels=20,u.mmMaxMovesWithUnload=100,u.mmMaxMovesInEventNoTimes=180,u.mmMaxMovesInEventWithTimes=130,u.mmMinStallingMoveTime=1e4,u.mmMaxInMemoryMoves=600,u.mmDebug=!1,u.SCIntegration=!1,u.SCIntegrationURLsContainList=[],u.SCIntegrationKeyList=["pageName","v25","v11","v39"],u.externalIdAttr="",u.recordHovers=!1,u.mhDeepLevel=2,u.mhMaxListSize=10,u.mhMaxInMemeoryHovers=100,u.mhDebug=!1,u.reportHybrid=!1,u.recordWebSocket=!1,u.domRecordEnabled=!1,u.reportAllResourcesLoad=!1,u.ignoreReportResourcesByTagNames=[],u.reportExternalResources=!1,u.reportScriptURLContainList=[],u.reportScriptKeyList=[],u.reportImageURLContainList=[],u.reportImageKeyList=[],u.clsDebug=!0,u.clsDebugCharsLimit=1e3,u.clsDebugMaxReports=2,t.setup="beacon";t.eventTypes=["mousedown","mouseup","touchstart","touchend","click","scroll","change","blur","focusout","submit","reset","load","unload","hashchange","popstate","focus","focusin","mouseenter","mousemove","error","keydown","keypress","mouseover","beforeunload","resize"],u.maxReportSize=1900,u.maxPostReportSize=1e4,u.reportInterval=3e3,u.reportPostInterval=1e4,u.postRetry=!0,u.interceptAjax=!0,u.recordAjaxRequest=!0,u.recordWebSocket=!1;var v=",";"undefined"!=typeof t&&t.detectorScript&&(v=t.detectorScript.getAttribute("data-clsarraydelim")||v);var w={toBoolean:function(a,b){if("TRUE"===a.toUpperCase())return!0;if("FALSE"===a.toUpperCase())return!1;throw"cannot parse boolean from '"+a+"'"},toNumber:function(a){if(!/^-?\d+$/.test(a))throw"cannot parse number from '"+a+"'";return parseInt(a)},toString:function(a){return a},toStringArray:function(a){return null==a?[]:a.split(v)}},x={isArray:function(a){return(Array.isArray?Array.isArray(a):a instanceof Array)?null:"array is expected"},elementsOfType:function(a,b){for(var c=0;c<b.length;c++)if(typeof b[c]!==a)return"array element type mismatch. expected:"+a+" actual:"+typeof b[c];return null},and:function(){var a=arguments;return function(b){for(var c=0;c<a.length;c++){var d=a[c](b);if(null!=d)return d}return null}}};d.prototype.ignore=function(a){this[a.toLowerCase()]={name:a,ignore:!0}},d.newBuilder=function(){var a=new d;return{bool:function(b,c){return a.add("boolean",!1,w.toBoolean,null,b,c),this},num:function(b,c){return a.add("number",!1,w.toNumber,null,b,c),this},str:function(b,c){return a.add("string",!0,w.toString,null,b,c),this},strarray:function(b,c){var d=function(a){return x.elementsOfType("string",a)};return a.add("object",!0,w.toStringArray,x.and(x.isArray,d),b,c),this},ignore:function(b){return a.ignore(b),this},build:function(){return a}}};var y={options:{caseSensitive:!0,errorOnUnknown:!1},validate:function(a,b){var c=new e;if(this.parsingError)return c.addError(y.parsingError),c;b=b||{};var d=a.requiredFieldsMask();for(var f in b)if(b.hasOwnProperty(f)){var g=a[f.toLowerCase()];if(!g){(y.options.errorOnUnknown?c.addError:c.addWarning).call(c,"unknown configuration field",f);continue}if(g.ignore)continue;if(g.name!==f&&y.options.caseSensitive){c.addError("unknown configuration field (did you mean '"+g.name+"'?).",f),delete d[g.name];continue}var h=b[f];if(null==h){g.nullable||c.addError("value cannot be null, value of "+g.type+" type is expected.",f);continue}if(typeof h!==g.type){c.addError("value type mismatch. expected:"+g.type+" actual:"+typeof h,f);continue}if(g.required&&delete d[g.name],g.validator){var i=g.validator(h);i&&c.addError("value violation, "+i,f)}}for(var j in d)c.addError("missing required field",j);return c},onParsingError:function(a){y.parsingError=a}};e.prototype.addError=function(a,b){this.errors.push({field:b,reason:a})},e.prototype.addWarning=function(a,b){this.warnings.push({field:b,reason:a})},e.prototype.toString=function(){var a=function(a){for(var b="",c=0;c<a.length;c++)return b+="\n"+(a[c].field?"'"+a[c].field+"': ":"")+a[c].reason;return b},b="\n"+this.errors.length+" error(s):";return b+=a(this.errors),b+="\n"+this.warnings.length+" warning(s):",b+=a(this.warnings)};var z={parse:function(a,b,c,d,e){var f=function(a){return"function"!=typeof String.prototype.trim?a.replace(/^\s+|\s+$/g,""):a.trim()};a=a||{};for(var g=null!=c?c.split(b):[],h=0;h<g.length;h++){var i=g[h].split("=");if(2==i.length){var j,k=f(i[0]),l=f(i[1]),m=a[k.toLowerCase()];m?(j=m.parser,"undefined"==typeof j&&(j=w.toString)):j=w.toString;try{d[k]=j(l)}catch(a){e&&e("'"+k+"': "+a)}}}}},A=d.newBuilder().ignore("injectionTime").ignore("visualName").ignore("detectionScriptURI").str("reportURI",!0).bool("recordMouseMoves",!1).bool("recordScrolls",!1).bool("recordErrors",!1).bool("reportValidationErrors",!1).num("idleEventTimeInterval",!1).bool("botDetection",!1).bool("recordHovers",!1).bool("reportByPost",!1).num("maxPostReportSize",!1).num("reportPostInterval",!1).bool("postRetry",!1).bool("interceptAjax",!1).bool("recordAjaxRequest",!1).bool("ajaxDebug",!1).bool("recordWebSocket",!1).bool("DOMBeaconImg",!1).num("reportInterval",!1).bool("reportAllOnUnload",!1).num("maxReportSize",!1).strarray("maskList",!1).strarray("maskClassList",!1).str("externalIdAttr",!1).bool("useIdSelectors",!1).bool("useNameInFormSelectors",!1).bool("preferNamesInFormSelectors",!1).strarray("noIdSelectorsForClassNames",!1).strarray("noIdSelectorsForIDs",!1).strarray("noIdSelectorsForAttrs",!1).bool("SCIntegration",!1).strarray("SCIntegrationURLsContainList",!1).strarray("SCIntegrationKeyList",!1).bool("reportAllResourcesLoad",!1).bool("reportExternalResources",!1).strarray("ignoreReportResourcesByTagNames",!1).strarray("reportScriptURLContainList",!1).strarray("reportScriptKeyList",!1).strarray("reportImageURLContainList",!1).strarray("reportImageKeyList",!1).bool("debugMode",!1).bool("traceMode",!1).bool("suppressMouseMovesDebug",!1).bool("timingMode",!1).num("maxReportsWithUnload",!1).num("minDragPixels",!1).bool("reportVisualNames",!1).num("titleCharsLimit",!1).num("maxTimeForIdleEvent",!1).num("validationValueForRenderTime",!1).bool("reportDebugInfo",!1).bool("supportNativeAutoComplete",!1).bool("recordEnterForInputs",!1).bool("recordTypingAll",!1).strarray("recordTypingForAttrs",!1).strarray("recordTypingForClasses",!1).strarray("recordTypingForIDs",!1).num("mmMaxMovesWithUnload",!1).num("mmMaxMovesInEventNoTimes",!1).num("mmMaxMovesInEventWithTimes",!1).num("mmMinStallingMoveTime",!1).num("mmMaxInMemoryMoves",!1).bool("mmDebug",!1).num("mhDeepLevel",!1).num("mhMaxListSize",!1).num("mhMaxInMemeoryHovers",!1).bool("mhDebug",!1).bool("dependentScroll",!1).num("minStallingScrollTime",!1).bool("scrollDebug",!1).bool("clsDebug",!1).num("clsDebugCharsLimit",!1).num("clsDebugMaxReports",!1).bool("domRecordEnabled",!1).strarray("domNewPageTriggers",!1).strarray("pageSnapshotTriggers",!1).num("domStartAfter",!1).num("domUpdateEveryWsMsgIn",!1).strarray("ignorableElementIds",!1).bool("recordAjaxCallsAnyway",!1).bool("truncateEventsWithUnload",!1).bool("mmRecordTimes",!1).num("mmDiluteMinPixels",!1).bool("reportHybrid",!1).str("customTLD",!1).bool("domCompress",!1).build(),B="undefined"!=typeof _cls_config?_cls_config:"undefined"!=typeof _config?_config:{};if(t.detectorScript){var C=t.detectorScript.getAttribute("data-clsdelim")||";",D=t.detectorScript.getAttribute("data-clsconfig");D&&z.parse(A,C,D,B,y.onParsingError)}for(var E in B)B.hasOwnProperty(E)&&(u[E]=B[E]);var F=function(a,b){function c(a,b,c){c=(c||0)-1;for(var d=a?a.length:0;++c<d;)if(a[c]===b)return c;return-1}function d(){return D.pop()||{a:"",b:null,c:"",k:null,configurable:!1,enumerable:!1,false:!1,d:"",e:"",v:null,g:"",null:!1,number:null,z:null,push:null,h:null,string:null,i:"",true:!1,undefined:!1,j:!1,writable:!1}}function e(){}function f(a){a.length=0,C.length<F&&C.push(a)}function g(a){var b=a.k;b&&g(b),a.b=a.k=a.object=a.number=a.string=null,D.length<F&&D.push(a)}function h(){}function i(a,b,c){if("function"!=typeof a)return B;if("undefined"==typeof b)return a;var d=a.__bindData__||na.funcNames&&!a.name;if("undefined"==typeof d){var e=H&&Z.call(a);na.funcNames||!e||G.test(e)||(d=!0),(na.funcNames||!d)&&(d=!H||H.test(e),oa(a,d))}if(!0!==d&&d&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return A(a,b)}function j(a,b,c,d,e,g){if(c){var h=c(a,b);if("undefined"!=typeof h)return!!h}if(a===b)return 0!==a||1/a==1/b;if(a===a&&!(a&&S[typeof a]||b&&S[typeof b]))return!1;if(null==a||null==b)return a===b;var i=ba.call(a),k=ba.call(b);if(i==J&&(i=P),k==J&&(k=P),i!=k)return!1;switch(i){case L:case M:return+a==+b;case O:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case Q:case R:return a==b+""}if(k=i==K,!k){if($.call(a,"__wrapped__")||$.call(b,"__wrapped__"))return j(a.__wrapped__||a,b.__wrapped__||b,c,d,e,g);if(i!=P)return!1;var i=!na.argsObject&&p(a)?Object:a.constructor,l=!na.argsObject&&p(b)?Object:b.constructor;if(i!=l&&!(q(i)&&i instanceof i&&q(l)&&l instanceof l))return!1}for(l=!e,e||(e=C.pop()||[]),g||(g=C.pop()||[]),i=e.length;i--;)if(e[i]==a)return g[i]==b;var m=0,h=!0;if(e.push(a),g.push(b),k){if(i=a.length,m=b.length,h=m==a.length,!h&&!d)return h;for(;m--;)if(k=i,l=b[m],d)for(;k--&&!(h=j(a[k],l,c,d,e,g)););else if(!(h=j(a[m],l,c,d,e,g)))break;return h}return ta(b,function(b,f,i){return $.call(i,f)?(m++,h=$.call(a,f)&&j(a[f],b,c,d,e,g)):void 0}),h&&!d&&ta(a,function(a,b,c){return $.call(c,b)?h=-1<--m:void 0}),l&&(f(e),f(g)),h}function l(a,b,c,d,e,f){var g=1&b,h=2&b,i=4&b,j=8&b,k=16&b,m=32&b,o=a;if(!h&&!q(a))throw new TypeError;k&&!c.length&&(b&=-17,k=c=!1),m&&!d.length&&(b&=-33,m=d=!1);var p=a&&a.__bindData__;if(p)return!g||1&p[1]||(p[4]=e),!g&&1&p[1]&&(b|=8),!i||4&p[1]||(p[5]=f),k&&_.apply(p[2]||(p[2]=[]),c),m&&_.apply(p[3]||(p[3]=[]),d),p[1]|=b,l.apply(null,p);if(!g||h||i||m||!(na.fastBind||ea&&k))t=function(){var p=arguments,q=g?e:this;return(i||k||m)&&(p=ka.call(p),k&&ca.apply(p,c),m&&_.apply(p,d),i&&p.length<f)?(b|=16,l(a,j?b:-4&b,p,null,e,f)):(h&&(a=q[o]),this instanceof t?(q=n(a.prototype),p=a.apply(q,p),r(p)?p:q):a.apply(q,p))};else{if(k){var s=[e];_.apply(s,c)}var t=k?ea.apply(a,s):ea.call(a,e)}return oa(t,ka.call(arguments)),t}function m(){var a=d();a.h=I,a.b=a.c=a.g=a.i="",a.e="t",a.j=!0;for(var b,c=0;b=arguments[c];c++)for(var e in b)a[e]=b[e];c=a.a,a.d=/^[^,]+/.exec(c)[0],b=Function,c="return function("+c+"){",e="var n,t="+a.d+",E="+a.e+";if(!t)return E;"+a.i+";",a.b?(e+="var u=t.length;n=-1;if("+a.b+"){",na.unindexedChars&&(e+="if(s(t)){t=t.split('')}"),e+="while(++n<u){"+a.g+";}}else{"):na.nonEnumArgs&&(e+="var u=t.length;n=-1;if(u&&p(t)){while(++n<u){n+='';"+a.g+";}}else{"),na.enumPrototypes&&(e+="var G=typeof t=='function';"),na.enumErrorProps&&(e+="var F=t===k||t instanceof Error;");var f=[];if(na.enumPrototypes&&f.push('!(G&&n=="prototype")'),na.enumErrorProps&&f.push('!(F&&(n=="message"||n=="name"))'),a.j&&a.f)e+="var C=-1,D=B[typeof t]&&v(t),u=D?D.length:0;while(++C<u){n=D[C];",f.length&&(e+="if("+f.join("&&")+"){"),e+=a.g+";",f.length&&(e+="}"),e+="}";else if(e+="for(n in t){",a.j&&f.push("m.call(t, n)"),f.length&&(e+="if("+f.join("&&")+"){"),e+=a.g+";",f.length&&(e+="}"),e+="}",na.nonEnumShadows){for(e+="if(t!==A){var i=t.constructor,r=t===(i&&i.prototype),f=t===J?I:t===k?j:L.call(t),x=y[f];",k=0;7>k;k++)e+="n='"+a.h[k]+"';if((!(r&&x[n])&&m.call(t,n))",a.j||(e+="||(!x[n]&&t[n]!==A[n])"),e+="){"+a.g+"}";e+="}"}return(a.b||na.nonEnumArgs)&&(e+="}"),e+=a.c+";return E",b=b("d,j,k,m,o,p,q,s,v,A,B,y,I,J,L",c+e+"}"),g(a),b(i,N,V,$,E,p,pa,s,a.f,W,S,ma,R,X,ba)}function n(a){return r(a)?fa(a):{}}function o(){var a=(a=h.indexOf)===y?c:a;return a}function p(a){return!(!a||"object"!=typeof a)&&ba.call(a)==J}function q(a){return"function"==typeof a}function r(a){return!(!a||!S[typeof a])}function s(a){return"string"==typeof a||ba.call(a)==R}function t(a,b,c){var d=-1,e=o(),f=a?a.length:0,g=!1;return c=(0>c?ia(0,f+c):c)||0,pa(a)?g=-1<e(a,b,c):"number"==typeof f?g=-1<(s(a)?a.indexOf(b,c):e(a,b,c)):sa(a,function(a){return++d<c?void 0:!(g=a===b)}),g}function u(a,b,c){var d=[];if(b=h.createCallback(b,c,3),pa(a)){c=-1;for(var e=a.length;++c<e;){var f=a[c];b(f,c,a)&&d.push(f)}}else sa(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function v(a,b,c){if(b&&"undefined"==typeof c&&pa(a)){c=-1;for(var d=a.length;++c<d&&!1!==b(a[c],c,a););}else sa(a,b,c);return a}function w(a,b,c){var d=-1,e=a?a.length:0,f=Array("number"==typeof e?e:0);if(b=h.createCallback(b,c,3),pa(a))for(;++d<e;)f[d]=b(a[d],d,a);else sa(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function x(a,b,c,d){var e=3>arguments.length;if(b=i(b,d,4),pa(a)){var f=-1,g=a.length;for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a)}else sa(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function y(a,b,d){if("number"==typeof d){var e=a?a.length:0;d=0>d?ia(0,e+d):d||0}else if(d)return d=z(a,b),a[d]===b?d:-1;return c(a,b,d)}function z(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?h.createCallback(c,d,1):B,b=c(b);e<f;)d=e+f>>>1,c(a[d])<b?e=d+1:f=d;return e}function A(a,b){return 2<arguments.length?l(a,17,ka.call(arguments,2),null,b):l(a,1,null,null,b)}function B(a){return a}var C=[],D=[],E={},F=40,G=/^function[ \n\r\t]+\w/,H=(H=/\bthis\b/)&&H.test(function(){return this})&&H,I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),J="[object Arguments]",K="[object Array]",L="[object Boolean]",M="[object Date]",N="[object Error]",O="[object Number]",P="[object Object]",Q="[object RegExp]",R="[object String]",S={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},T=S[typeof a]&&a||this,U=[],V=Error.prototype,W=Object.prototype,X=String.prototype,Y=RegExp("^"+(W.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Z=Function.prototype.toString,$=W.hasOwnProperty,_=U.push,aa=W.propertyIsEnumerable,ba=W.toString,ca=U.unshift,da=function(){try{var a={},b=Y.test(b=Object.defineProperty)&&b,c=b(a,a,a)&&b}catch(a){}return c}(),ea=Y.test(ea=ba.bind)&&ea,fa=Y.test(fa=Object.create)&&fa,ga=Y.test(ga=Array.isArray)&&ga,ha=Y.test(ha=Object.keys)&&ha,ia=Math.max,ja=Math.min,ka=U.slice,T=Y.test(T.attachEvent),la=ea&&!/\n|true/.test(ea+T),ma={};ma[K]=ma[M]=ma[O]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},ma[L]=ma[R]={constructor:!0,toString:!0,valueOf:!0},ma[N]=ma["[object Function]"]=ma[Q]={constructor:!0,toString:!0},ma[P]={constructor:!0},function(){for(var a=I.length;a--;){var b,c=I[a];for(b in ma)$.call(ma,b)&&!$.call(ma[b],c)&&(ma[b][c]=!1)}}();var na=h.support={};!function(){var a=function(){this.x=1},b={0:1,length:1},c=[];a.prototype={valueOf:1,y:1};for(var d in new a)c.push(d);for(d in arguments);na.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),na.argsClass=ba.call(arguments)==J,na.enumErrorProps=aa.call(V,"message")||aa.call(V,"name"),na.enumPrototypes=aa.call(a,"prototype"),na.fastBind=ea&&!la,na.funcNames="string"==typeof Function.name,na.nonEnumArgs=0!=d,na.nonEnumShadows=!/valueOf/.test(c),na.spliceObjects=(U.splice.call(b,0,1),!b[0]),na.unindexedChars="xx"!="x"[0]+Object("x")[0]}(1),fa||(n=function(a){if(r(a)){e.prototype=a;var b=new e;e.prototype=null}return b||{}});var oa=da?function(a,b){var c=d();c.value=b,da(a,"__bindData__",c),g(c)}:e;na.argsClass||(p=function(a){return!(!a||"object"!=typeof a)&&$.call(a,"callee")});var pa=ga||function(a){return!(!a||"object"!=typeof a)&&ba.call(a)==K},qa=m({a:"z",e:"[]",i:"if(!(B[typeof z]))return E",g:"E.push(n)"}),ra=ha?function(a){return r(a)?na.enumPrototypes&&"function"==typeof a||na.nonEnumArgs&&a.length&&p(a)?qa(a):ha(a):[]}:qa,ga={a:"g,e,K",i:"e=e&&typeof K=='undefined'?e:d(e,K,3)",b:"typeof u=='number'",v:ra,g:"if(e(t[n],n,g)===false)return E"},T={i:"if(!B[typeof t])return E;"+ga.i,b:!1},sa=m(ga),ta=m(ga,T,{j:!1}),ga=m(ga,T);return q(/x/)&&(q=function(a){return"function"==typeof a&&"[object Function]"==ba.call(a)}),h.bind=A,h.createCallback=function(a,b,c){var d=typeof a;if(null==a||"function"==d)return i(a,b,c);if("object"!=d)return function(b){return b[a]};var e=ra(a),f=e[0],g=a[f];return 1!=e.length||g!==g||r(g)?function(b){for(var c=e.length,d=!1;c--&&(d=j(b[e[c]],a[e[c]],null,!0)););return d}:function(a){return a=a[f],g===a&&(0!==g||1/g==1/a)}},h.filter=u,h.forEach=v,h.forIn=ta,h.forOwn=ga,h.keys=ra,h.map=w,h.pluck=w,h.collect=w,h.each=v,h.select=u,h.contains=t,h.identity=B,h.indexOf=y,h.isArguments=p,h.isArray=pa,h.isFunction=q,h.isNumber=function(a){return"number"==typeof a||ba.call(a)==O},h.isObject=r,h.isString=s,h.isUndefined=function(a){return"undefined"==typeof a},h.lastIndexOf=function(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?ia(0,d+c):ja(c,d-1))+1);d--;)if(a[d]===b)return d;return-1},h.reduce=x,h.sortedIndex=z,h.foldl=x,h.include=t,h.inject=x,h.last=function(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=h.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[f-1]:b;for(c=ia(0,f-e),e=void 0,c||(c=0),"undefined"==typeof e&&(e=a?a.length:0),d=-1,e=e-c||0,f=Array(0>e?0:e);++d<e;)f[d]=a[c+d];return f},h.VERSION="2.0.0",h}(this),G=new f,H={consoleTimingSupported:a.console&&a.console.time&&a.console.timeEnd&&a.console.timeStamp,hasNativeStartsWith:F.isFunction(String.prototype.startsWith),currentTimestamp:F.isFunction(Date.now)&&F.isNumber(Date.now())?Date.now:function(){return(new Date).getTime()},isElement:function(a){return"hasAttribute"in a},isDOMElement:function(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName},isOldIE:function(){return!b.addEventListener},hasTouch:function(){return"ontouchstart"in a},isChromeDesktop:function(){var a=navigator.userAgent,b=/Android|webOS|iPhone|iPad|iPod|Windows Phone|IEMobile|Opera Mini|Mobile|mobile|Tablet|CriOS/i.test(a),c=/Chrome/i.test(a);return!b&&c},getAttributeForElement:function(a,b){if(!a||!H.isElement(a))return null;var c;return a.hasAttribute(b.toLocaleLowerCase())?c=a.getAttribute(b.toLocaleLowerCase()):a.hasAttribute(b.toLocaleUpperCase())&&(c=a.getAttribute(b.toLocaleUpperCase())),c&&(c=H.trim(c)),c||null},getElementId:function(a){return a&&a.id?F.isString(a.id)?a.id:a.getAttribute("id"):null},isDuplicateElementId:function(a){try{if(!("querySelectorAll"in b))return!1;var c=b.querySelectorAll("[id='"+a+"']");return c.length>1}catch(a){return!1}},getMouseEnterTarget:function(){return"onmouseenter"in b?b:"onmouseenter"in a?a:b.body},hasTimingAPI:function(){return!F.isUndefined(a.performance)&&!F.isUndefined(a.performance.timing)},startsWith:function(a,b){return!(!F.isString(a)||!F.isString(b))&&(H.hasNativeStartsWith?a.startsWith(b):a.slice(0,b.length)===b)},truncateStr:function(a,b,c){var d=a;return a&&a.length>b&&(d=a.substr(0,b),c&&d.concat("...")),d},getCoordinate:function(a){var c=a.changedTouches||a.touches,d=c&&c.length>0?c[0]:a,e=H.extractElementFromEvent(a);if(H.isHybrid()||"HTML"===e.nodeName.toUpperCase())return new j(d.clientX,d.clientY);if(F.isUndefined(d.pageX)||F.isUndefined(d.pageY)){var f=a.clientX+b.body.scrollLeft+b.documentElement.scrollLeft,g=a.clientY+b.body.scrollTop+b.documentElement.scrollTop;return new j(f,g)}return new j(d.pageX,d.pageY)},getScrollTopLeft:function(){try{var b=null!==a.top&&a.top!==a.self?a.top:a,c=void 0!==b.pageYOffset?b.pageYOffset:(b.document.documentElement||b.document.body.parentNode||b.document.body).scrollTop,d=void 0!==b.pageXOffset?b.pageXOffset:(b.document.documentElement||b.document.body.parentNode||b.document.body).scrollLeft;return{top:c,left:d}}catch(a){return H.log("Failed getting scroll values: "+a.message,a),{top:0,left:0}}},getElementXYCoordinates:function(a){var b=a.getBoundingClientRect(),c=H.getScrollTopLeft();return new j(Math.round(b.left+c.left),Math.round(b.top+c.top))},isSameCoordinates:function(a,b){return a.x===b.x&&a.y===b.y},isCoordinatesDistLargerThan:function(a,b,c){return Math.abs(a.x-b.x)>c||Math.abs(a.y-b.y)>c},getCurrentScrollReach:function(){try{var b=null!==a.top&&a.top!==a.self?a.top:a,c=void 0!==b.pageYOffset?b.pageYOffset:(b.document.documentElement||b.document.body.parentNode||b.document.body).scrollTop,d=b.innerHeight||b.document.documentElement.clientHeight||b.document.body.clientHeight;return c+d}catch(a){return H.log("Failed getting scroll reach: "+a.message,a),0}},indexOfNode:function(a,b,c){for(var d=c||0;d<a.length;d++)if(a[d]===b)return d;return-1},getLocationUrlSplitByHash:function(){var b=a.location.href,c=b.indexOf("#");return c===-1?{url:b,withoutHash:b,hash:null}:{url:b,withoutHash:b.slice(0,c),hash:b.slice(c+1,b.length)}},getHashFromUrl:function(a){var b=a.indexOf("#");return b===-1?"":a.slice(b+1,a.length)},getReferrerUrlWithoutHash:function(){var b=a.document.referrer;if(!b||0===b.length)return null;var c=b.indexOf("#");return c!==-1?b.slice(0,c):b},encodeAsBase:function(a,b){return a.toString(b)},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})},addEventHandler:function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},removeEventHandler:function(a,b,c){F.isUndefined(a.removeEventListener)?F.isUndefined(a.detachEvent)||a.detachEvent("on"+b,c):a.removeEventListener(b,c,!0)},extractElementFromEvent:function(b){void 0===b&&(b=a.event);var c=b.target||b.srcElement;return null===c||void 0===c?null:3===c.nodeType?c.parentNode:c},eventDetectionTagNames:{select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",unload:"img",abort:"img",readystatechange:"XMLHttpRequest"},isEventSupported:function(c){var d="on"+c;if(d in a||d in a.document)return!0;var e=b.createElement(H.eventDetectionTagNames[d]||"div"),f=d in e;return f||(e.setAttribute(d,"return;"),f=F.isFunction(e[d])),e=null,f||H.log(c+" is not supported."),f},isConsoleSupported:!F.isUndefined(a.console)&&F.isFunction(a.console.log),getReason:function(a){return F.isString(a)?"("+a+")":"(not specified)"},hashcode:function(a){var b=0;if(0===a.length)return b;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)-b+d,b&=b}return b},trim:function(a){return"function"!=typeof String.prototype.trim?a.replace(/^\s+|\s+$/g,""):a.trim()},log:function(){if(!F.isUndefined(u.debugMode)&&u.debugMode){var b=Array.prototype.slice.call(arguments,0);if(b.unshift(H.currentTimestamp()),N.page.frame===!0&&b.push(" (in frame "+N.page.id+")"),H.isConsoleSupported)console.log.apply(console,b);else if(!F.isUndefined(a.console.log)){var c=b.join(" ");console.log(c)}}},trace:function(){u.traceMode&&H.log.apply(this,arguments)},time:function(b){u.timingMode&&H.consoleTimingSupported&&a.console.time(b)},timeEnd:function(b){u.timingMode&&H.consoleTimingSupported&&a.console.timeEnd(b)},timeStamp:function(b){u.timingMode&&H.consoleTimingSupported&&a.console.timeStamp(b)},isMaskedElement:function(a){var b=H.getElementId(a);return"password"===a.type||F.contains(u.maskList,b)||a.hasAttribute(t.maskingAttribute)},extractDomain:function(a){var b;return a?(b=a.indexOf("://")>-1?a.split("/")[2]:a.split("/")[0],b=b.split(":")[0]):null},hasOneOfClassNames:function(a,b){for(var c=" "+H.getClass(a)+" ",d=0;d<b.length;d++)if(c.indexOf(" "+b[d]+" ")>-1)return!0;return!1},getClass:function(a){return a.getAttribute&&a.getAttribute("class")||""},getClassList:function(a){var b=H.getClass(a);return b?b.split(" "):[]},hasClassName:function(a,b){return(" "+H.getClass(a)+" ").indexOf(" "+b+" ")>-1},getHybridType:function(){return"undefined"==typeof eyeViewHybridBridge?null:eyeViewHybridBridge.getHybridType()},isHybrid:function(){return"undefined"!=typeof eyeViewHybridBridge},isHybridAndroid:function(){return H.isHybrid()&&H.getHybridType()===eyeViewHybridBridge.HYBRID_ANDROID},isHybridIOS:function(){return H.isHybrid()&&H.getHybridType()===eyeViewHybridBridge.HYBRID_IOS},immutableSet:function(){for(var a={},b=0;b<arguments.length;b++)a[arguments[b]]=!0;return a},DOMElement2Str:function(a){return a instanceof CharacterData?a.textContent:a.outerHTML},currentTimeStamp:function(){return(new Date).getTime()},isAttachedToDOM:function(a){for(;a;){if(a===b)return!0;a=a.parentNode}return!1},ensureProperty:function(a){for(var b=Array.prototype.slice.call(arguments,1),c=a,d=0;d<b.length;d++)c.hasOwnProperty(b[d])||(c[b[d]]={}),c=c[b[d]];return c},readCookie:function(a){var c,d,e=a+"=",f=b.cookie.split(";");for(c=0;c<f.length;c++)if(d=H.trim(f[c]),0===d.indexOf(e))return d.substring(e.length,d.length);return null},bus:G};!function(a){"use strict";var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=function(a){for(var b={},c=0,d=a.length;c<d;c++)b[a.charAt(c)]=c;return b}(b),d=String.fromCharCode,e=function(a){var b=a.charCodeAt(0);return b<128?a:b<2048?d(192|b>>>6)+d(128|63&b):d(224|b>>>12&15)+d(128|b>>>6&63)+d(128|63&b)},f=function(a){return a.replace(/[^\x00-\x7F]/g,e)},g=function(a){var c=[0,2,1][a.length%3],d=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0),e=[b.charAt(d>>>18),b.charAt(d>>>12&63),c>=2?"=":b.charAt(d>>>6&63),c>=1?"=":b.charAt(63&d)];return e.join("")},h=a.btoa||function(a){return a.replace(/[\s\S]{1,3}/g,g)},i=function(a){return h(f(a))},j=function(a,b){return b?i(a).replace(/[+\/]/g,function(a){return"+"==a?"-":"_"}):i(a)},k=function(a){return j(a,!0)},l=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}/g,m=function(a){return d(a.length<3?(31&a.charCodeAt(0))<<6|63&a.charCodeAt(1):(15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2))},n=function(a){return a.replace(l,m)},o=function(a){var b=a.length,e=b%4,f=(b>0?c[a.charAt(0)]<<18:0)|(b>1?c[a.charAt(1)]<<12:0)|(b>2?c[a.charAt(2)]<<6:0)|(b>3?c[a.charAt(3)]:0),g=[d(f>>>16),d(f>>>8&255),d(255&f)];return g.length-=[0,0,2,1][e],g.join("")},p=a.atob||function(a){return a.replace(/[\s\S]{1,4}/g,o)},q=function(a){return n(p(a))},r=function(a){return q(a.replace(/[-_]/g,function(a){return"-"==a?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},s=function(a){for(var c,d="",e=0;e<a.length;e+=3)c=(252&a[e])>>2,d+=b.charAt(c),c=(3&a[e])<<4,e+1<a.length?(c|=(240&a[e+1])>>4,d+=b.charAt(c),c=(15&a[e+1])<<2,
e+2<a.length?(c|=(192&a[e+2])>>6,d+=b.charAt(c),c=63&a[e+2],d+=b.charAt(c)):(d+=b.charAt(c),d+="=")):(d+=b.charAt(c),d+="==");return d};a.Base64={atob:p,btoa:h,fromBase64:r,toBase64:j,bytesToBase64:s,utob:f,encode:j,encodeURI:k,btou:n,decode:r}}(H),g.prototype.put=function(a,b){var c={key:a,value:b};return this._keymap[a]=c,this.tail?(this.tail.newer=c,c.older=this.tail):this.head=c,this.tail=c,this.size===this.limit?this.shift():void this.size++},g.prototype.shift=function(){var a=this.head;return a&&(this.head.newer?(this.head=this.head.newer,this.head.older=c):this.head=c,a.newer=a.older=c,delete this._keymap[a.key]),a},g.prototype.get=function(a,b){var d=this._keymap[a];if(d!==c)return d===this.tail?b?d:d.value:(d.newer&&(d===this.head&&(this.head=d.newer),d.newer.older=d.older),d.older&&(d.older.newer=d.newer),d.newer=c,d.older=this.tail,this.tail&&(this.tail.newer=d),this.tail=d,b?d:d.value)},g.prototype.find=function(a){return this._keymap[a]},g.prototype.set=function(a,b){var c,d=this.get(a,!0);return d?(c=d.value,d.value=b):(c=this.put(a,b),c&&(c=c.value)),c},g.prototype.toString=function(){for(var a="",b=this.head;b;)a+=String(b.key)+":"+b.value,b=b.newer,b&&(a+=" < ");return a},t.dictionary={eventTypes:{change:0,document:2,mousedown:3,touchstart:4,touchend:5,focusout:6,blur:7,unload:9,submit:10,reset:11,mouseup:12,drag:13,scroll:14,popstate:15,keydown:16,keyup:17,keypress:18,timing:20,idle:21,ajaxRequest:22,formValidationError:23,hashchange:25,botDetection:26,mouseenter:27,navigation:28,mousemove:29,error:30,thirdparty:31,custom:32,hover:33,thirdpartymap:34,performance:35,resource:36,clsdebug:37,resize:38,webSocketOpen:50,webSocketClose:51,webSocketError:52,webSocketFrame:53,pageSnapshot:91,pageUpdate:92},elements:{DIV:0,SPAN:1,INPUT:2,FORM:3,SELECT:4,TEXTAREA:5,TABLE:6,TR:7,TD:8,IFRAME:9,TBODY:10,THEAD:11,LABEL:12},encodingTypes:{cd_number:0,cd_boolean:1,cd_string:2,cd_coordinate:3},performanceTimingEvents:{navigationStart:1,redirectStart:2,fetchStart:4,domainLookupStart:5,connectStart:7,secureConnectionStart:8,requestStart:10,responseStart:13,domLoading:15,domContentLoadedEventStart:17,domComplete:19,loadEventStart:20,loadEventEnd:21},encode:function(a,b){var d=b[a];return d!==c?d:a},encodeEventType:function(a){return t.dictionary.encode(a,t.dictionary.eventTypes)},encodeNodeName:function(a){return t.dictionary.encode(a,t.dictionary.elements)},encodeEncodingType:function(a){return t.dictionary.encode(a,t.dictionary.encodingTypes)},encodePerformanceTimingMeasurement:function(a){return t.dictionary.encode(a,t.dictionary.performanceTimingEvents)}};var I={urlHistory:[],limit:150,direction:{BACK:1,FORWARD:2},urlType:{FULL_URL:1,HASH_ONLY:2},updateUrlHistory:function(){var c=b.location.href,d=I.urlHistory.length;if(0===d)return I.urlHistory.push(c),!1;if(I.urlHistory[d-1]===c)return!1;if(d>=2&&I.urlHistory[d-2]===c){var e=I.urlHistory.pop(),f=I.urlType.HASH_ONLY,g=H.getHashFromUrl(a.location.href),h=H.getHashFromUrl(e);return I.reportNavigation(I.direction.BACK,f,h,g),!0}return d>=I.limit&&I.urlHistory.shift(),I.urlHistory.push(c),!1},reportNavigation:function(a,b,c,d){var e=N.createEventObject("navigation",H.currentTimestamp(),null);e.value={direction:a,urlType:b,fromUrl:c,toUrl:d},e.shouldEncodeValue=!1,e.binding={valueEncoding:M.encodeNavigation},N.saveEvent(e)},printHistory:function(){for(var a=0;a<I.urlHistory.length;a++)console.log("  - "+a+": "+I.urlHistory[a])}},J={severity:{ERROR:0,WARN:1,INFO:2,DEBUG:3},types:{GENERAL_ERR:{code:100,count:0},INVALID_TIMING_ERR:{code:101,count:0},TOP_WINDOW_SIZE_ERR:{code:102,count:0},WINDOW_SIZE_NOT_VALID_ERR:{code:103,count:0},KEREN_ERR:{code:104,count:0}},currentDebugInfo:null,registerError:function(a,b){J.registerDebugInfo(J.severity.ERROR,a,b)},registerErrorAndLog:function(a,b){J.registerDebugInfoAndLog(J.severity.ERROR,a,b)},registerDebugInfoAndLog:function(a,b,c){J.registerDebugInfo(a,b,c),H.log(c)},registerDebugInfo:function(a,b,c){b.count++,null===J.currentDebugInfo&&(J.currentDebugInfo=new h(a,b.code,b.count,c))},getRegisteredDebugInfo:function(a){var b=J.currentDebugInfo;return null===b||F.isUndefined(b)?null:(a&&J.clearDebugInfo(),b)},clearDebugInfo:function(){J.currentDebugInfo=null},setRegisteredDebugInfoOnEvent:function(a){if(null===a.getDebugInfo()||F.isUndefined(a.getDebugInfo())){var b=J.getRegisteredDebugInfo(!0);null!==b&&"undefined"!=typeof b&&a.setDebugInfo(b)}},setErrorOnEvent:function(a,b,c){J.setDebugInfoOnEvent(a,J.severity.ERROR,b,c)},setErrorOnEventAndLog:function(a,b,c,d){J.setDebugInfoOnEvent(a,J.severity.ERROR,b,c),d?H.log(c,d):H.log(c)},setWarnOnEvent:function(a,b,c){J.setDebugInfoOnEvent(a,J.severity.WARN,b,c)},setDebugInfoOnEvent:function(a,b,c,d){if(null===a||F.isUndefined(a))return void H.log("Failed setting debug on non-existing event");var e=new h(b,c.code,c.count,d);a.setDebugInfo(e)}},K={specialChar:{tilda:"_clstil",asterisks:"_clsast",space:"_clsspc"},shouldEncode:t.encodeSelectors,getSelectorExpression:function(a,b,c){"undefined"!=typeof b?this.shouldEncode=b:this.shouldEncode=t.encodeSelectors,c=c||{useId:!0};var d=u.useIdSelectors&&c.useId;if(null===a||F.isUndefined(a)||!H.isElement(a))return t.encoding.rootSelector;if(a.name&&u.preferNamesInFormSelectors&&this.hasFormAncestor(a))return this.getElementWithAttribute(a,"name");if(d){var e=H.getElementId(a);if(e&&!H.isDuplicateElementId(e)&&K.checkAllowUseId(a,e))return this.getElementNameWithId(a,!0)}if(a.name&&u.useNameInFormSelectors&&this.hasFormAncestor(a))return this.getElementWithAttribute(a,"name");for(var f=this.getElementNameWithClasses(a),g=[f],h=a,i=this.shouldEncode?"*":">";h.parentNode&&!this.isRoot(h);)if(h=h.parentNode,1===h.nodeType){var j=H.getElementId(h);if(j&&d&&!H.isDuplicateElementId(j)&&K.checkAllowUseId(h,j))return this.addToHeadIfFound(g,this.getElementNameWithId(h,!1)),g.join(i);var k=this.getElementNameWithClasses(h);if(this.addToHeadIfFound(g,k),h===parent)return g.join(i)}return g.join(i)},getElementNameWithClasses:function(a){if(this.isRoot(a))return this.shouldEncode?t.encoding.rootSelector:"BODY";var b=this.encodeNodeName(a.nodeName),c=this.getSiblingIndex(a);if(null!==c)return this.encodeElementNameAndSiblingIndex(b,c);if(t.useClassesInSelectors){var d=H.getClassList(a);if(d.length>0){for(var e=b,f=0;f<d.length;f++)e+="."+d[f];return e}}return b},getSiblingIndex:function(a){if(!a.parentNode)return null;var b=a.parentNode.childNodes;if(b.length<2)return null;for(var c=a.nodeName,d=[],e=0;e<b.length;e+=1)b[e].nodeName===c&&d.push(b[e]);if(d.length<2)return null;for(var f=0;f<d.length;f+=1)if(d[f]===a)return f;return null},getElementNameWithId:function(a,b){if(this.isRoot(a))return null;var c=H.getElementId(a);return(c&&c.indexOf("~")!==-1||c.indexOf("*")!==-1||c.indexOf(" ")!==-1)&&(c=this.replaceSpecialChars(c)),b?this.encodeNodeName(a.nodeName)+"#"+c:"#"+c},addToHeadIfFound:function(a,b){var c=typeof b;"string"!=c&&"number"!=c||a.unshift(b)},encodeElementNameAndSiblingIndex:function(a,b){var c=a;return this.shouldEncode||(c+=":eq"),c+"("+b+")"},encodeNodeName:function(a){return this.shouldEncode?t.dictionary.encodeNodeName(a):a},isRoot:function(a){var b=a.nodeName;return"HTML"===b||"BODY"===b},replaceSpecialChars:function(a){return a.replace(/~/g,this.specialChar.tilda).replace(/\*/g,this.specialChar.asterisks).replace(/ /g,this.specialChar.space)},hasFormAncestor:function(a){for(var b=a.parentNode;null!==b;){if("undefined"==typeof b&&console.log("hasFormAncestor undefined node: ",a),"FORM"===b.nodeName)return!0;b=b.parentNode}return!1},getElementWithAttribute:function(a,b){var c=a.getAttribute(b),d="["+b+"="+c+"]";return d.indexOf("~")===-1&&d.indexOf("*")===-1&&d.indexOf(" ")===-1||(d=this.replaceSpecialChars(d)),this.encodeNodeName(a.nodeName)+d},checkAllowUseId:function(a,b){if(0===u.noIdSelectorsForClassNames.length&&0===u.noIdSelectorsForIDs.length&&0===u.noIdSelectorsForAttrs.length)return!0;var c,d=H.getClassList(a);for(c=0;c<u.noIdSelectorsForClassNames.length;c++)if(F.indexOf(d,u.noIdSelectorsForClassNames[c])>0)return!1;for(c=0;c<u.noIdSelectorsForAttrs.length;c++)if(a.hasAttribute(u.noIdSelectorsForAttrs[c]))return!1;for(c=0;c<u.noIdSelectorsForIDs.length;c++){var e=u.noIdSelectorsForIDs[c];if(e&&b.indexOf(e)>=0)return!1}return!0}},L={shouldListenToLoadResources:function(){return!(!u.reportAllResourcesLoad&&!u.reportExternalResources)||(u.reportScriptURLContainList.length>0&&u.reportScriptKeyList.length>0||u.reportImageURLContainList.length>0&&u.reportImageKeyList.length>0)},filterLoad:function(a){if(!a)return!0;var b=a.nodeName.toUpperCase();if("STYLE"===b)return!0;if(F.indexOf(u.ignoreReportResourcesByTagNames,b)>=0)return!0;if("IFRAME"===b&&a.src.indexOf("eyeviewevent")>=0)return H.log("filtering hybrid iOS loading iframe event: ",a.src),!0;if(u.reportAllResourcesLoad)return!1;var c=a.src||a.href;return(!u.reportExternalResources||!L.isExternalResource(c,a))&&("SCRIPT"===b&&u.reportScriptURLContainList.length>0?!L.isUrlToReport(c,u.reportScriptURLContainList):!("IMG"===b&&u.reportImageURLContainList.length>0)||!L.isUrlToReport(c,u.reportImageURLContainList))},interceptLoad:function(a){var b=a.element.nodeName,c=N.addResource(b,a.value,a.timestamp);c.event=a;var d=a.element.src||a.element.href,e=null;if("SCRIPT"===b&&u.reportScriptURLContainList.length>0?L.isUrlToReport(d,u.reportScriptURLContainList)&&(e=L.parseToKVMap(d,u.reportScriptKeyList)):"IMG"===b&&u.reportImageURLContainList.length>0&&L.isUrlToReport(d,u.reportImageURLContainList)&&(e=L.parseToKVMap(d,u.reportImageKeyList)),e){H.trace("intercepted thirdparty resource parameters map for url: "+d);var f={value:e};N.saveThirdPartyMapEvent(f)}return!!u.reportAllResourcesLoad||!(!u.reportExternalResources||!L.isExternalResource(d,a.element))},isUrlToReport:function(a,b){if("undefined"==typeof a||null===a)return!1;var c=a.indexOf("?");if(c===-1)return!1;a=a.substr(0,c);for(var d=0;d<b.length;d++)if(a.indexOf(b[d])>=0)return!0;return!1},parseToKVMap:function(a,b){for(var c,d,e={},f=a.substring(a.indexOf("?")+1),g=f.split("&"),h=!1,i=0;i<g.length;i++){var j=g[i],k=j.indexOf("=");try{if(c=decodeURIComponent(j.substr(0,k)),!F.contains(b,c))continue;d=decodeURIComponent(j.substr(k+1)),e[c]=d,h=!0}catch(a){H.log("Error in ResourceHandler: Failed parsing a key-value pair "+(c?"[key="+c+"]":"")+" : "+j,a)}}return h?e:null},isExternalResource:function(b,c){if(!b)return!1;if("undefined"!=typeof c._cls_external_res)return c._cls_external_res;var d=a.location.hostname,e=H.extractDomain(b);return c._cls_external_res=e!==d,c._cls_external_res}},M={state:{currentlyEncodedPageEvent:null},compress:function(a){return H.pako.gzip(a)},encodeEventAsString:function(a,b){M.state.currentlyEncodedPageEvent=a;var c,d=t.encoding.delimiters.eventParts,e=M.getEncodedTimestamp(a),f=M.encodeEventType(a.type),g=F.isUndefined(a.binding)||F.isUndefined(a.binding.valueEncoding)?a.value:a.binding.valueEncoding(a.value);"undefined"==typeof b&&(b=F.isUndefined(a.selectorExpression)||null==a.selectorExpression?t.encoding.rootSelector:a.selectorExpression);var h=e+d+f+d+b;if(F.isString(g)&&g.length>0){c=a.shouldEncodeValue?t.encoding.valueEncodedPrefix:t.encoding.valueNotEncodedPrefix;var i=a.shouldEncodeValue?H.Base64.encode(g):g;h+=d+c+i}else h+=d+"-";if(F.isUndefined(a.extraInfo))h+=d+"-";else{var j=M.encodeExtraInfo(a);h+=d+j}if(u.reportDebugInfo&&!F.isUndefined(a.debugInfo)){var k=M.encodeDebugInfo(a);h+=d+k}else h+=d+"-";if(a.domSnapshot){var l;if(c=t.encoding.domSnapshotPrefix,u.domCompress){var m=M.compress(JSON.stringify(a.domSnapshot));l=H.Base64.bytesToBase64(m),c=c.toLowerCase()}else l=H.Base64.encode(JSON.stringify(a.domSnapshot));h+=d+c+l}return H.trace("encoding ("+a.type+") "+("webSocketFrame"===a.type?"{webSocketFrame event string is too long}":h)+(a.getSubPage().length>0?" [on "+a.getSubPage()+"]":"")),M.state.currentlyEncodedPageEvent=null,a.encodedString=h,h},encodeExtraInfo:function(a){var b=function(a,b,c,d){F.isString(c)&&a.push(b+"."+d+"_"+c)},c=a.extraInfo;if(F.isUndefined(c))return"";for(var d=[],e=m.prototype.extraInfoAttrs,f=0;f<e.length;f++){var g=e[f],h=c[g.name];F.isUndefined(h)||b(d,g.encodeName,g.encodeFunc(h),g.encodeCode)}return d.join("*")},encodeDebugInfo:function(a){var b=a.debugInfo;if(F.isUndefined(b))return"-";var c=function(a,b,c){F.isUndefined(c)||a.push(b+"_"+c)},d=[];return c(d,"s",b.severity),c(d,"c",b.code),c(d,"i",b.count),b.msg&&b.count<=3&&c(d,"m",M.encodeString(b.msg)),d.join("*")},getEncodedTimestamp:function(a){var b=a.timestamp;return F.isNumber(b)||(H.log("Missing event timestamp",a),b=H.currentTimestamp()),M.encodeNumber(b)},encodeEventType:function(a){return t.encodeEventTypes?t.dictionary.encodeEventType(a):a},encodePageDetails:function(a){var b=function(a,b,c){F.isString(c)&&a.push(b+"_"+c)},c=[];return a.frame&&b(c,"t",a.frame?"f":"p"),b(c,"u",M.encodeHashCode(a.urlWithoutHash)),a.hash&&b(c,"h",H.Base64.encode(a.hash)),b(c,"s",M.captureWindowSize()),b(c,"sc",M.captureScreenSize()),a.referrerWithoutHash&&b(c,"r",M.encodeHashCode(a.referrerWithoutHash)),t.reportBase64URLs&&b(c,"ub",H.Base64.encode(a.url)),c.join("*")},encodePageSnapshotData:function(a){var b,c;if(u.domCompress){var d=M.compress(a.html);b=H.Base64.bytesToBase64(d),c="hh"}else b=H.Base64.encode(a.html),c="h";return["sn_"+a.seq,c+"_"+b,"c_"+H.Base64.encode(a.cookie),"ch_"+a.charset].join("*")},captureWindowSize:function(){if(F.isNumber(a.innerWidth)&&F.isNumber(a.innerHeight)){try{if(null!==a.top&&a.top!==a.self)return M.validateSize(a.top.innerWidth,a.top.innerHeight,"[top inner]")}catch(b){var c="Failed querying the topmost window size for window (1): "+a.name+" - "+b.name+": "+b.message;J.setErrorOnEventAndLog(M.state.currentlyEncodedPageEvent,J.types.TOP_WINDOW_SIZE_ERR,c,b)}return M.validateSize(a.innerWidth,a.innerHeight,"[inner]")}if(!F.isUndefined(b.body)&&F.isNumber(b.body.offsetWidth)&&F.isNumber(b.body.offsetHeight)){try{if(null!==a.top&&a.top!==a.self)return M.validateSize(a.top.document.body.offsetWidth,a.top.document.body.offsetHeight,"[top offset]")}catch(b){var d="Failed querying the topmost window size for window (2): "+a.name+" - "+b.name+": "+b.message;J.setErrorOnEventAndLog(M.state.currentlyEncodedPageEvent,J.types.TOP_WINDOW_SIZE_ERR,d,b)}return M.validateSize(b.body.offsetWidth,b.body.offsetHeight,"[offset]")}return"x"},captureScreenSize:function(){return M.validateSize(screen.width,screen.height,"[screen]")},validateSize:function(a,b,c){var d=F.isNumber(a)&&F.isNumber(b);return d||J.setErrorOnEvent(M.state.currentlyEncodedPageEvent,J.types.WINDOW_SIZE_NOT_VALID_ERR,"Non valid values for window size for "+c+": x="+a+" y="+b),d?a+"x"+b:"x"},encodeResize:function(){var a=function(a,b,c){F.isString(c)&&a.push(b+"_"+c)},b=[];return a(b,"ws",M.captureWindowSize()),a(b,"sc",M.captureScreenSize()),b.join("*")},encodeTimings:function(a){return F.reduce(a,function(a,b,c){var d="u_"+c+"*t_"+b.total;return F.isNumber(b.rendering)&&(d+="*r_"+b.rendering),F.isNumber(b.dns)&&(d+="*d_"+b.dns),F.isNumber(b.timeToFirstBuffer)&&(d+="*f_"+b.timeToFirstBuffer),F.isNumber(b.downloadTime)&&(d+="*w_"+b.downloadTime),F.isNumber(b.originalRenderTime)&&(d+="*o_"+b.originalRenderTime),F.isString(a)&&a.length>0?a+"**"+d:d},"")},encodePerformanceTimings:function(a){var b=a.perf.timing,c=a.perf.navigation,d=a.browserTime,e=function(a,b,c){F.isNumber(c)&&a.push(b+"_"+M.encodeNumber(c))},f=[];for(var g in b)if("undefined"!=typeof t.dictionary.performanceTimingEvents[g]){var h=t.dictionary.encodePerformanceTimingMeasurement(g),i=b[g];e(f,h,i)}return c&&F.isNumber(c.type)&&e(f,"nt",c.type),c&&F.isNumber(c.redirectCount)&&e(f,"rc",c.redirectCount),d&&e(f,"bt",d),f.join("*")},encodeAjaxRequest:function(a){var b=function(a,b,c){F.isString(c)&&a.push(b+"_"+c)},c=[],d=M.encodeHashCode(a.url),e=a.ajaxUrls.get(d);return F.isUndefined(e)&&(a.ajaxUrls.set(d,a.url),b(c,"u",H.Base64.encode(a.url))),b(c,"uh",d),a.duration&&b(c,"d",M.encodeNumber(a.duration)),a.status&&b(c,"s",M.encodeNumber(a.status)),a.statusText&&b(c,"st",H.Base64.encode(a.statusText)),c.join("*")},encodeWebSocketFrame:function(a){var b=function(a,b,c){F.isString(c)&&a.push(b+"_"+c)},c=[];return b(c,"i",H.Base64.encode(a.id)),b(c,"d",M.encodeBoolean(a.direction)),a.isBinary()?b(c,"bp",H.Base64.bytesToBase64(new Uint8Array(a.payload))):b(c,"tp",H.Base64.encode(a.payload)),c.join("*")},encodeWebSocketSimpleEvent:function(a){return"i_"+H.Base64.encode(a.id)},encodeWebSocketCloseEvent:function(a){var b=function(a,b,c){F.isString(c)&&a.push(b+"_"+c)},c=[];b(c,"i",H.Base64.encode(a.id));var d=a.event;return b(c,"c",M.encodeNumber(d.code)),b(c,"r",H.Base64.encode(d.reason)),b(c,"w",M.encodeBoolean(d.wasClean)),c.join("*")},encodeCustomEvent:function(a){var b=function(a,b,c){F.isString(c)&&a.push(b+"_"+c)},c=[];return b(c,"n",H.Base64.encode(a.name)),b(c,"v",H.Base64.encode(a.val)),c.join("*")},encodeNavigation:function(a){var b=function(a,b,c){F.isString(c)&&a.push(b+"_"+c)},c=[];return a.direction&&b(c,"d",M.encodeNumber(a.direction)),a.urlType&&b(c,"u",M.encodeNumber(a.urlType)),F.isUndefined(a.fromUrl)||b(c,"f",H.Base64.encode(a.fromUrl)),F.isUndefined(a.toUrl)||b(c,"t",H.Base64.encode(a.toUrl)),c.join("*")},encodeKeyEvent:function(a){var b="";return a.unicode&&(b+=a.unicode),F.isUndefined(a.content)||(b+="_"+H.Base64.encode(a.content)),b},encodeClickDetails:function(a){return M.encodeCoordinate(a.start)+"*"+M.encodeCoordinate(a.end)+"*"+M.encodeNumber(a.duration)},encodeMouseMove:function(a){u.mmDebug&&H.log("encoding coordArr["+a.length+"]:"+JSON.stringify(a));for(var b=function(a,b,c,d){d=d||0;var e=u.mmRecordTimes?"_"+M.encodeNumber(d):"",f=Math.round(b),g=Math.round(c);a.push(M.encodeNumber(f)+"_"+M.encodeNumber(g)+e)},c=[],d=0;d<a.length;d++){var e=a[d];b(c,e.x,e.y,e.t)}return c.join("*")},encodeHoverEvent:function(a){for(var b=[],c=[],d=a.length-1;d>=0;d--){var e=a[d];if(c.indexOf(e)>=0)u.mhDebug&&H.log("encode hover skipping duplicate: ",e);else{var f=K.getSelectorExpression(e);if(b.push(f),c.push(e),c.length>=u.mhMaxListSize)break;u.mhDebug&&H.log("encoding hover selector: "+f,e)}}var g=b.join(" ");return u.mhDebug&&H.log("encoding total of ["+b.length+"] hovers: "+g),g},encodeKVMap:function(a){var b=function(a,b,c){F.isString(e)&&a.push(H.Base64.encode(b)+"_"+H.Base64.encode(c))},c=[];for(var d in a)if(a.hasOwnProperty(d)){var e=a[d];b(c,d,e)}return c.join("*")},encodeNumber:function(a){return F.isNumber(a)?H.encodeAsBase(a,t.encoding.numberBase):void H.log("Trying to encode a non-number "+a)},encodeBoolean:function(a){return a?"1":"0"},encodeCoordinate:function(a){if(!F.isNumber(a.x)||!F.isNumber(a.y))return void H.log("Trying to encode coordinate with non-numbers x,y : ("+a.x+","+a.y+")");var b=Math.round(a.x),c=Math.round(a.y);return M.encodeNumber(b)+"_"+M.encodeNumber(c)},encodeCoordinate64:function(a){return H.Base64.encode(M.encodeCoordinate(a))},encodeString:function(a){return H.Base64.encode(a)},encodeHashCode:function(a){if(!F.isString(a))return void H.log("Trying to encode hashCode of a non-string "+a);var b=H.hashcode(a);return M.encodeNumber(b)},encodeAndConcatenateEventsForReportCookie:function(a,b){return F.reduce(a,function(a,b){var c=M.encodeEventAsString(b);return F.isString(a)&&a.length>0?a+t.encoding.delimiters.events+c:c},b)}},N={env:t,config:u,utils:H,_:F,page:{timing:{}},bindings:{registered:[],unsupportedEventTypes:[]},plugins:{},reports:{events:[],resources:[]},state:{loaded:!1,clickStart:{},scrolling:{},unloading:!1,maxScrollReach:0,typableElementsLRUMap:new g(20),lastFocusData:{},mouseEnterReported:!1,hover:{hoverStartTimestamp:0,hoverElementList:[]},clsDebugCounter:0},touchDetected:!1,ajaxUrls:new g(20),history:I,debugInfoHandler:J,initialize:function(){if(H.log("Initializing Detector... ("+t.setup+" setup)"),t.multiple_loading_detected)return void H.log("Warning: initialization cancelled. preventing multiple loading. ");try{if("undefined"!=typeof A){var c=y.validate(A,u);if(c.errors.length>0)return void console.error("[EyeView-1401]: Detector configuration validation failure. validation report:"+c);H.log("configuration fields validation report:"+c)}else H.log("Warning: configuration scheme not set, skipping configuration validation.")}catch(a){return void console.error("[EyeView-1402]: Error while validating Detector configuration:"+a+". Detector is DISABLED.")}try{N.setClientCookies(),N.checkSupportModeSession(),N.initializePageDetails(),I.updateUrlHistory(),N.registerPlugins(),N.updateScrollReach(),N.saveDocumentLoadEvent(H.currentTimestamp()),H.log("Extracted page details for "+N.page.id+" at "+N.page.urlWithoutHash),N.registerPreLoadEvents(),u.SCIntegration&&G.on("3rdpartymap:scReport",N.saveThirdPartyMapEvent),G.emit("init:preloaded");var d=a.document.readyState;H.log("readyState on initialization: "+d),!b.body||"complete"!==d&&"interactive"!==d?H.addEventHandler(a,"load",N.onLoad,!1):N.onLoad(),u.suppressMouseMovesDebug&&!u.mmDebug&&H.log("Suppressing 'mousemove' events debug messages.")}catch(a){H.log("ERROR: while initializing detector. Exception: ",a.stack?a.stack:a.message),console.log("WARNING[EyeView-1302]: Failed initializing detector script - "+a.message),N.saveClsDebugErrorEvent("initialize",a)}},onLoad:function(){H.log("Post loading initialization... (readyState = "+a.document.readyState+")");var c=H.currentTimestamp();N.state.loaded||(H.time("onLoadInitialization"),N.documentEvent&&b.title.length>0&&("undefined"==typeof N.page.title||0===N.page.title.length)&&(N.page.title=N.getPageTitle(),N.documentEvent.setExtraInfo(m.prototype.VISUAL_NAME,N.page.title)),u.botDetection&&!H.hasTouch()&&Q.init(),N.page.loadTimestamp=c,N.resolvePageLoadTime(N.page),u.reportValidationErrors&&G.on("jquery:validationError",N.saveValidationError),N.state.loaded=!0,G.emit("init:loaded"),N.registerPostLoadEvents(),G.emit("init:post_binding"),H.timeEnd("onLoadInitialization"))},registerPlugins:function(){F.forOwn(N.plugins,function(a,b){var c=a.initialize(G);c&&H.log("Registered plugin: "+b)})},registerPreLoadEvents:function(){var c=[{type:"beforeunload",interception:N.interceptUnload,target:a,logicalName:"unload"},{type:"hashchange",valueExtraction:N.extractLocationHash,target:a,interception:N.interceptHashchange},{type:"resize",valueEncoding:M.encodeResize,target:a},{type:N.getChangeEventType(),valueExtraction:N.extractElementValue,interception:N.interceptFocusLost,filter:N.filterNonChangableEventsElements,logicalName:"change",target:b},{type:N.page.eventTypes.clickStart,interception:N.interceptClickStart,target:b},{type:N.page.eventTypes.clickEnd,interception:N.interceptClickEnd,valueEncoding:M.encodeClickDetails,target:b},{type:"reset",target:b},{type:"submit",valueExtraction:N.extractElementSource,valueEncoding:M.encodeHashCode,target:b},{type:N.getFocusInEventType(),valueExtraction:N.extractElementValue,interception:N.interceptFocusIn,filter:N.filterNonTypableElements,target:b}];"blur"!==N.getChangeEventType()&&c.push({preload:!0,type:"blur",valueExtraction:N.extractElementValue,interception:N.interceptBlur,filter:N.filterNonTypableElements,logicalName:"change",target:b}),L.shouldListenToLoadResources()&&c.push({type:"load",valueExtraction:N.extractElementSource,filter:L.filterLoad,interception:L.interceptLoad,target:b,logicalName:"resource"}),u.recordMouseMoves&&c.push({type:"mousemove",valueExtraction:N.extractMouseMoveValue,valueEncoding:M.encodeMouseMove,encodeValue:!1,interception:N.interceptMouseMove,dependent:!0,dontSendElement:!0,target:b}),u.recordHovers&&c.push({type:"mouseover",encodeValue:!1,filter:N.filterHovers,interception:N.interceptMouseOver,valueEncoding:M.encodeHoverEvent,target:b}),u.recordScrolls&&c.push({type:"scroll",valueExtraction:N.extractScrollValue,valueEncoding:M.encodeCoordinate,filter:N.filterScrollElements,interception:N.interceptScroll,dependent:u.dependentScroll,target:b}),u.recordErrors&&c.push({type:"error",valueExtraction:N.extractErrorValue,interception:N.interceptError,target:a});var d=H.getMouseEnterTarget();d!==b&&d!==a||c.push({type:"mouseenter",interception:N.interceptMouseEnter,target:d}),N.shouldListenToKeyEvents()&&(c.push({type:"keydown",interception:N.interceptKeyboard,valueEncoding:M.encodeKeyEvent,dependent:!0,target:b}),c.push({type:"keypress",interception:N.interceptKeyboard,valueEncoding:M.encodeKeyEvent,dependent:!0,target:b})),u.recordWebSocket&&(G.on("websocket:open",N.eventSaver("webSocketOpen",M.encodeWebSocketSimpleEvent)),G.on("websocket:error",N.eventSaver("webSocketError",M.encodeWebSocketSimpleEvent)),G.on("websocket:close",N.eventSaver("webSocketClose",M.encodeWebSocketCloseEvent)),G.on("websocket:frame",N.saveWebSocketFrame)),u.domRecordEnabled&&(G.on("pageSnapshot",N.savePageSnapshotEvent),G.on("pageUpdate",N.savePageUpdate)),N.page.hasTimingAPI&&!u.recordAjaxCallsAnyway||(G.on("ajax:load",N.recordAjaxResource),G.on("ajax:error",N.recordAjaxResource)),u.recordAjaxRequest&&G.on("ajax:loadend",N.saveAjaxRequestEvent),N.bindPageEvents(c)},registerPostLoadEvents:function(){var a=[];N.state.mouseEnterReported||H.getMouseEnterTarget()!==b.body||a.push({type:"mouseenter",interception:N.interceptMouseEnter,target:b.body}),a.length>0&&N.bindPageEvents(a)},bindPageEvents:function(a){H.time("bindPageEvents"),F.forEach(a,function(a){N.registerEventBinding(a)}),H.log("Bound event types ("+N.bindings.registered.length+"): "+F.pluck(N.bindings.registered,"type")+(N.bindings.unsupportedEventTypes.length?" Unsupported event types: ["+N.bindings.unsupportedEventTypes.join(", ")+"].":"")),H.timeEnd("bindPageEvents")},registerEventBinding:function(b){var c=b.target||a.document.body;if(F.isUndefined(c)||null==c)H.log("Couldn't register '"+b.type+"' handler on a non-existing element.",b);else try{N.handleElementsEvents(c,b)}catch(c){H.log("Failed binding '"+b.type+"'. Error: "+c.message,c),a.console&&console.error(c)}},handleElementsEvents:function(a,b){var c=b.type;if(F.contains(t.eventTypes,c))if(H.isEventSupported(c)){var d=N.createHandlerForResolvingAndReportingElements(b);H.addEventHandler(a,c,d,!0),N.bindings.registered.push({type:c,el:a,handler:d})}else N.bindings.unsupportedEventTypes.push(c)},createHandlerForResolvingAndReportingElements:function(a){return function(b){if(N.handleDOMEvent(b,a),"beforeunload"!==b.type)return!0}},handleDOMEvent:function(b,c){try{if(b=b||a.event,!F.isUndefined(b._cls_handled)&&b._cls_handled===!0)return void H.log("WARN: handler already handled this event. skipping..",b);b._cls_handled=!0,H.time("handleDOMEvent_"+b.type);var d=H.extractElementFromEvent(b),e=H.getElementId(d);u.ignorableElementIds&&F.contains(u.ignorableElementIds,e)||N.handleEvent(b,d,c),H.timeEnd("handleDOMEvent_"+b.type)}catch(a){H.log("ERROR: while handling "+b.type+" DOM event ",b," Exception: ",a.stack?a.stack:a.message),N.saveClsDebugErrorEvent("handleDOMEvent",a,"event type="+b.type)}},handleEvent:function(a,b,c){if(!F.isFunction(c.filter)||!c.filter(b,a)){var d=H.currentTimestamp(),e=a.type;H.time("handleEvent_"+e);var f=N.createEventObject(e,d,b);f.domEvent=a;var g=!F.isUndefined(c.dontSendElement)&&c.dontSendElement===!0;f.selectorExpression=g?t.encoding.rootSelector:K.getSelectorExpression(b)||t.encoding.rootSelector,f.binding=c,F.isUndefined(c.encodeValue)||c.encodeValue!==!1||(f.shouldEncodeValue=!1),F.isUndefined(c.dependent)||c.dependent!==!0||(f.dependent=!0),N.extractValue(f,c),N.extractExternalId(f,b),N.interceptReport(f,c),u.reportVisualNames&&f.report&&!g&&N.extractVisualName(f,b),N.saveEvent(f),G.emit("event:"+f.type,f),H.timeEnd("handleEvent"+e)}},createEventObject:function(a,b,c){return new m(a,b,c,N.page.id)},extractValue:function(a,b){try{if(!F.isUndefined(b.valueExtraction)){var c=b.valueExtraction(a.domEvent,a.element);F.isUndefined(c)||null==c||(a.value=c)}}catch(b){H.log("Failed extracting value for event "+a.type+" - "+b.name+": "+b.message,b),"clsdebug"!==a.type&&N.saveClsDebugErrorEvent("extractValue",b,"event type="+a.type)}},extractExternalId:function(a,b){if(b&&H.isElement(b)&&!F.isUndefined(u.externalIdAttr)&&F.isString(u.externalIdAttr)&&u.externalIdAttr.length>0){var c=H.getAttributeForElement(b,u.externalIdAttr);null!==c&&c.length>0&&a.setExtraInfo(m.prototype.EXTERNAL_ID,c)}},interceptReport:function(a,b){if(!F.isUndefined(b.interception))try{a.report=b.interception(a)}catch(b){H.log("Failed intercepting "+a.type+" event: "+b.message,b,a),"clsdebug"!==a.type&&N.saveClsDebugErrorEvent("interceptReport",b,"event type="+a.type)}},addEvent:function(a){N.config.debugMode&&N.reports.events.push(a)},getFocusInEventType:function(){return H.isOldIE()?"focusin":"focus"},getChangeEventType:function(){return H.isOldIE()?"onfocusout"in b?"focusout":"blur":"change"},startFocusTiming:function(a){var b=H.currentTimestamp(),c=N.state.lastFocusData.startTime;N.state.lastFocusData={element:a,startTime:b,prevFocusStartTime:c}},endFocusTiming:function(a){if(N.state.lastFocusData.element!==a)return void H.trace("Cannot measure focus time because of element mismatch. ");var b=H.currentTimestamp();N.state.lastFocusData.focusTime=b-N.state.lastFocusData.startTime},filterNonTypableElements:function(a,b){return null===a||(N.isChangebleElement(a)&&("focus"===b.type||"focusin"===b.type?N.startFocusTiming(a):"blur"===b.type&&N.endFocusTiming(a)),!N.isTypableElement(a))},filterNonChangableEventsElements:function(a,b){return null===a||null===b||(N.isChangebleElement(a)&&N.endFocusTiming(a),"change"!==b.type&&!N.isChangebleElement(a))},interceptFocusIn:function(a){return N.checkTypedContentHasChangedAndUpdate(a),!1},interceptFocusLost:function(a){return null!==a&&null!==a.element&&(N.state.lastFocusData.focusTime&&a.setExtraInfo(a.FOCUS_TIME_ATTR,N.state.lastFocusData.focusTime),!!N.isSelectableElement(a.element)||N.checkTypedContentHasChangedAndUpdate(a))},interceptBlur:function(a){return N.state.lastFocusData.focusTime&&a.setExtraInfo(a.FOCUS_TIME_ATTR,N.state.lastFocusData.focusTime),N.checkTypedContentHasChangedAndUpdate(a)},checkTypedContentHasChangedAndUpdate:function(a){var b="focus"===a.type||"focusin"===a.type,c="blur"===a.type||"focusout"===a.type,d=a.selectorExpression,e=b?a.value:a.value;if(null===e||F.isUndefined(e))return!1;var f={text:e,markAutoComplete:!1},g=N.state.typableElementsLRUMap.set(d,f),h=F.isUndefined(g);if(b&&!h&&g.text!==e&&e.toLocaleLowerCase().indexOf(g.text.toLocaleLowerCase())>=0&&(f.markAutoComplete=!0),c&&!h&&g.markAutoComplete){var i=N.state.lastFocusData.prevFocusStartTime;if(!F.isUndefined(i)&&F.isNumber(i)&&N.state.lastFocusData.element===a.element){var j=H.currentTimestamp(),k=j-i;a.setExtraInfo(a.FOCUS_TIME_ATTR,k)}else H.log("Unable to compute total auto-complete time"),a.setExtraInfo(a.FOCUS_TIME_ATTR,-1);return a.setExtraInfo(a.AUTO_COMPLETE_ATTR,!0),!0}return h||g.text!==e},isMouseEvent:function(a){return"mousedown"===a||"mouseup"===a},isTouchEvent:function(a){return"touchstart"===a||"touchend"===a||"touchmove"===a},interceptMouseEnter:function(a){if(N.state.mouseEnterReported)return!1;var b=H.getCoordinate(a.domEvent);return a.setExtraInfo(m.prototype.COORDINATE_ATTR,b),N.removeEventBinding("mouseenter"),N.state.mouseEnterReported=!0,N.page.hasTouch&&!N.touchDetected&&H.isChromeDesktop()&&(N.switchTouchToMouse(),N.page.hasTouch=!1),!0},switchTouchToMouse:function(){H.log("Mouse Detected. Switch touch event to mouse events"),N.removeEventBinding("touchstart"),H.isHybridAndroid()?N.removeEventBinding("touchmove"):N.removeEventBinding("touchend");var a=[{type:"mousedown",interception:N.interceptClickStart,target:b},{type:"mouseup",interception:N.interceptClickEnd,valueEncoding:M.encodeClickDetails,target:b}];N.bindPageEvents(a)},filterHovers:function(a,c){try{if("undefined"==typeof jQuery||F.isUndefined(jQuery)||F.isUndefined(jQuery._data))return!0;for(var d=a,e=1,f=F.isNumber(u.mhDeepLevel)?u.mhDeepLevel:1;null!==d&&d!==b.body&&e<=f;){var g=jQuery._data(d,"events");if(g&&g.mouseover&&g.mouseover.length>0)return u.mhDebug&&H.log("++ Hover adding element(level-"+e+") "+(d.id?d.id:""),d),
N.addHoverElement(d),!0;e++,d=d.parentElement}}catch(b){H.log("Exception while extracting hover information for element : ",a,b.message,b),N.saveClsDebugErrorEvent("filterHovers",b,"element="+(a?a.nodeName:"null"))}return!0},addHoverElement:function(a){N.state.hover.hoverElementList.length<u.mhMaxInMemeoryHovers?(N.state.hover.hoverElementList.push(a),N.state.hover.hoverStartTimestamp=H.currentTimestamp()):H.log("warn: exceed size of hover elements (>100). skipping..")},cleanHoverElements:function(){u.mhDebug&&H.log("Hover cleaning"),N.state.hover.hoverElementList=[],N.state.hover.hoverStartTimestamp=0},interceptMouseOver:function(a){return!1},interceptClickStart:function(a){if(Q.isActive()&&N.isMouseEvent(a.type)&&Q.notifyMouseAction(a.domEvent),N.isTouchEvent(a.type)&&(N.touchDetected=!0),u.recordHovers&&N.saveHoverEvent(),N.state.clickStart=N.createClickDetailsObject(a),a.setExtraInfo(m.prototype.COORDINATE_ATTR,N.state.clickStart),!F.isUndefined(a.element)){var b=H.getElementXYCoordinates(a.element);a.setExtraInfo(m.prototype.SYNC_COORDINATE,b)}return H.isHybrid()&&a.addHybridActionDataItem("start",{x:N.state.clickStart.x,y:N.state.clickStart.y}),!0},interceptClickEnd:function(a){Q.isActive()&&N.isMouseEvent(a.type)&&Q.notifyMouseAction(a.domEvent);var b={start:N.state.clickStart,end:N.createClickDetailsObject(a)},c=F.isNumber(b.start.x)&&F.isNumber(b.start.y);if(!c)return H.log("Dragging event with no captured click start."),!1;var d=Math.abs(b.end.x-b.start.x)>u.minDragPixels||Math.abs(b.end.y-b.start.y)>u.minDragPixels;if(d){a.type="drag",b.duration=b.start.timestamp?a.timestamp-b.start.timestamp:-1,a.value=b;var e=H.getElementXYCoordinates(b.start.elementObj);a.setExtraInfo(m.prototype.SYNC_COORDINATE,e),H.isHybrid()&&(a.addHybridActionDataItem("start",{x:b.start.x,y:b.start.y}),a.addHybridActionDataItem("end",{x:b.end.x,y:b.end.y}))}return N.state.clickStart={},d},interceptError:function(a){return a.value&&a.value.length>0},interceptHashchange:function(a){return I.updateUrlHistory(),!0},interceptUnload:function(a){H.time("unload"),H.log("Unloading..."),N.state.unloading=!0;var b=H.currentTimestamp();N.page.hasTimingAPI||P.set(t.cookies.referrer,M.encodeNumber(b)+"_"+H.Base64.encode(N.page.urlWithoutHash));var c=b-N.page.initializationTimestamp;return a.setExtraInfo(a.FOCUS_TIME_ATTR,c),a.setExtraInfo(a.SCROLL_REACH,Math.round(N.state.maxScrollReach)),H.timeEnd("unload"),!0},updateScrollReach:function(){N.state.maxScrollReach=Math.max(N.state.maxScrollReach,H.getCurrentScrollReach())},interceptScroll:function(a){return"#document"===a.element.nodeName&&(N.updateScrollReach(),!0)},filterScrollElements:function(a,b){return!(null!=a&&"MARQUEE"!==a.nodeName)},interceptMouseMove:function(a){return a.lastSingleMoveTimestamp=a.timestamp,a.setExtraInfo(a.FOCUS_TIME_ATTR,0),!0},createClickDetailsObject:function(a){var b=H.getCoordinate(a.domEvent);return b.elementObj=a.element,b.el=a.selectorExpression,b.timestamp=a.timestamp,b},shouldListenToKeyEvents:function(){return u.recordEnterForInputs||N.recordAutoCompleteRelatedChars()},recordAutoCompleteRelatedChars:function(){return"undefined"==typeof N.acCharsSupport&&(N.acCharsSupport=u.recordTypingAll||u.supportNativeAutoComplete||u.recordTypingForAttrs&&u.recordTypingForAttrs.length>0||u.recordTypingForClasses&&u.recordTypingForClasses.length>0||u.recordTypingForIDs&&u.recordTypingForIDs.length>0),N.acCharsSupport},resolveKeyData:function(a){var b=a.domEvent,c=a.element.value,d=a.element,e=b.keyCode||b.charCode;a.value={unicode:e};var f=H.isMaskedElement(d);return"keypress"===a.type?13!==e&&8!==e&&("0"!==b.charCode&&(f?(a.value={unicode:42},!0):(F.isUndefined(c)||null===c||(a.value.content=c+String.fromCharCode(e)),!0))):"keydown"===a.type&&(38===e||40===e||13===e?(f||(a.value.content=a.element.value),!0):8===e&&!F.isUndefined(c)&&null!==c&&!f&&(a.value.content=c.length>0?c.substring(0,c.length-1):"",!0))},interceptKeyboard:function(a){var b=a.element,c=b&&("INPUT"===b.nodeName||"BUTTON"===b.nodeName);if(!c)return!1;var d=a.domEvent.keyCode||a.domEvent.charCode,e=13===d;if(a.shouldEncodeValue=!1,e&&u.recordEnterForInputs)return N.resolveKeyData(a);if(u.supportNativeAutoComplete&&(b.hasAttribute("autocomplete")||b.hasAttribute("aria-autocomplete")&&"none"!==b.getAttribute("aria-autocomplete")||b.hasAttribute("class")&&F.contains(b.getAttribute("class"),"autocomplete")))return N.resolveKeyData(a);if(u.recordTypingAll)return N.resolveKeyData(a);var f;if(u.recordTypingForAttrs&&u.recordTypingForAttrs.length>0)for(f=0;f<u.recordTypingForAttrs.length;f++)if(b.hasAttribute(u.recordTypingForAttrs[f]))return N.resolveKeyData(a);if(b.hasAttribute("class")&&u.recordTypingForClasses&&u.recordTypingForClasses.length>0)for(f=0;f<u.recordTypingForClasses.length;f++)if(F.contains(b.getAttribute("class"),u.recordTypingForClasses[f]))return N.resolveKeyData(a);var g=H.getElementId(b);if(g&&u.recordTypingForIDs&&u.recordTypingForIDs.length>0)for(f=0;f<u.recordTypingForIDs.length;f++)if(g===u.recordTypingForIDs[f])return N.resolveKeyData(a);return!1},recordAjaxResource:function(a){N.addResource("ajax",a.url,a.timestamp)},addResource:function(a,b,c){var d=new i(a,b,c);return N.reports.resources.push(d),G.emit("timingResource",d),d},saveEvent:function(a){var b=N.renameEventType(a);if(N.addEvent(a),J.setRegisteredDebugInfoOnEvent(a),u.debugMode&&(a.report||u.traceMode)){var c=a.type===b?a.type:a.type+"("+b+")",d=!F.isUndefined(a.selectorExpression)&&a.selectorExpression!==t.encoding.rootSelector&&"#document"!==a.selectorExpression;N.shouldLog(a.type)&&H.log(c+(d?" -> "+a.selectorExpression:"")+N.eventValueToString(a)+(a.report?"":" [not reported]"),a)}a.report&&G.emit("saveEvent",a)},shouldLog:function(a){return"mousemove"===a?!u.suppressMouseMovesDebug||u.mmDebug:"webSocketFrame"===a?u.wsDebug:"scroll"!==a||u.scrollDebug},renameEventType:function(a){var b=a.type;return F.isUndefined(a.binding)||F.isUndefined(a.binding.logicalName)||(a.type=a.binding.logicalName),b},eventValueToString:function(a){var b=a.value||"NONE",c=" {V="+b;if(a.extraInfo)for(var d in a.extraInfo)a.extraInfo.hasOwnProperty(d)&&(c=c+","+d+"="+a.extraInfo[d]);return null===a.getDebugInfo()||F.isUndefined(a.getDebugInfo())||(c=c+",DI-"+a.getDebugInfo().code),c+="}"},saveDocumentLoadEvent:function(a){var b=N.createEventObject("document",a,null);b.value=N.page,b.binding={valueEncoding:M.encodePageDetails},b.shouldEncodeValue=!1,N.page.title=N.getPageTitle(),N.page.title&&b.setExtraInfo(m.prototype.VISUAL_NAME,N.page.title),N.documentEvent=b,N.saveEvent(b),G.emit("event:document")},savePageUpdate:function(){var a=N.createEventObject("pageUpdate",H.currentTimestamp(),null);N.saveEvent(a)},savePageSnapshotEvent:function(a){var b=N.createEventObject("pageSnapshot",H.currentTimestamp(),null);b.value=a,b.binding={valueEncoding:M.encodePageSnapshotData},b.shouldEncodeValue=!1,N.saveEvent(b)},saveAjaxRequestEvent:function(a){var b=N.createEventObject("ajaxRequest",H.currentTimestamp(),null);a.ajaxUrls=N.ajaxUrls,b.value=a,b.element=a.lastFocusedElement,b.selectorExpression=K.getSelectorExpression(a.lastFocusedElement)||t.encoding.rootSelector,b.binding={valueEncoding:M.encodeAjaxRequest},b.shouldEncodeValue=!1,N.saveEvent(b)},saveClsDebugErrorEvent:function(a,b,c){if(!(N.state.clsDebugCounter>u.clsDebugMaxReports)){N.state.clsDebugCounter++;var d=(b.name+": "+b.message,b.name+": "+b.message+(b.stack?" - "+b.stack:""));d=H.truncateStr(d,u.clsDebugCharsLimit,!0);var e=c?"{"+c+"} ":"",f="CLS Error in "+a+" "+e+": "+d;N.saveClsDebugEvent(f)}},saveClsDebugEvent:function(a){var b=N.createEventObject("clsdebug",H.currentTimestamp(),null);b.value=a,N.saveEvent(b)},saveWebSocketFrame:function(a){var b=N.createEventObject("webSocketFrame",H.currentTimestamp(),null);b.value=a,b.binding={valueEncoding:M.encodeWebSocketFrame},b.shouldEncodeValue=!1,N.saveEvent(b)},eventSaver:function(a,b){return function(c){var d=N.createEventObject(a,H.currentTimestamp(),null);d.value=c,d.binding={valueEncoding:b},d.shouldEncodeValue=!1,N.saveEvent(d)}},saveValidationError:function(a){var b=N.createEventObject("formValidationError",H.currentTimestamp(),null);b.element=a.element,b.value=a.message,b.selectorExpression=a.selector,N.saveEvent(b)},saveHoverEvent:function(){var a=N.createEventObject("hover",N.state.hover.hoverStartTimestamp,null);return 0===N.state.hover.hoverElementList.length?void(u.mhDebug&&H.log("no hovers to report")):(u.mhDebug&&H.log("saving "+N.state.hover.hoverElementList.length+" hovers"),a.value=N.state.hover.hoverElementList,N.cleanHoverElements(),a.binding={valueEncoding:M.encodeHoverEvent},a.shouldEncodeValue=!1,void N.saveEvent(a))},saveCustomEvent:function(a){var b=N.createEventObject("custom",H.currentTimestamp(),null);b.value=a,!F.isUndefined(a.domEl)&&H.isDOMElement(a.domEl)&&(b.element=a.domEl,b.selectorExpression=K.getSelectorExpression(a.domEl)||t.encoding.rootSelector),b.binding={valueEncoding:M.encodeCustomEvent},b.shouldEncodeValue=!1,N.saveEvent(b)},saveThirdPartyEvent:function(a){var b=N.createEventObject("thirdparty",H.currentTimestamp(),null);b.value=a.value,a.type&&b.setExtraInfo(m.prototype.TP_INTEGRATION_TYPE,a.type),a.element&&(b.element=a.element,b.selectorExpression=K.getSelectorExpression(a.element)||t.encoding.rootSelector),N.saveEvent(b)},saveThirdPartyMapEvent:function(a){var b=N.createEventObject("thirdpartymap",H.currentTimestamp(),null);b.value=a.value,b.binding={valueEncoding:M.encodeKVMap},a.type&&b.setExtraInfo(m.prototype.TP_INTEGRATION_TYPE,a.type),a.element&&(b.element=a.element,b.selectorExpression=K.getSelectorExpression(a.element)||t.encoding.rootSelector),b.shouldEncodeValue=!1,N.saveEvent(b)},initializePageDetails:function(){H.time("initializePageDetails");var b=N.page;b.initializationTimestamp=H.currentTimestamp(),b.id=H.uuid(),b.frame=a.self!=top,b.frame&&(b.referrerWithoutHash=H.getReferrerUrlWithoutHash());var c=H.getLocationUrlSplitByHash();b.url=c.url,b.urlWithoutHash=c.withoutHash,b.hash=c.hash,b.hasTouch=H.hasTouch(),b.hasTimingAPI=H.hasTimingAPI(),b.eventTypes={clickStart:b.hasTouch?"touchstart":"mousedown",clickEnd:b.hasTouch?H.isHybridAndroid()?"touchmove":"touchend":"mouseup"},b.title=N.getPageTitle(),H.timeEnd("initializePageDetails")},getPageTitle:function(){return H.truncateStr(b.title,u.titleCharsLimit,!0)},resolvePageLoadTime:function(a){if(a.hasTimingAPI)N.acquirePerformanceTiming();else{var c=P.get(t.cookies.referrer),d=b.referrer.replace(/#.*/,"");if(c){var e=c.split("_"),f=H.Base64.decode(e[1]);if(d===f){var g=parseInt(e[0],36);a.timing.total=a.loadTimestamp-g,N.saveTimingEvent({page:a.timing})}else H.log("Referrer does not match referrer stored in timing cookie: "+d+" != "+f)}}},saveTimingEvent:function(b){var c=N.createEventObject("timing",H.currentTimestamp(),a.document);c.value=b,c.binding={valueEncoding:M.encodeTimings},N.page.title&&c.setExtraInfo(m.prototype.VISUAL_NAME,N.page.title),N.saveEvent(c)},savePerformanceEvent:function(b){var c=N.createEventObject("performance",H.currentTimestamp(),a.document);a.performance&&a.performance.timing&&(c.value={perf:a.performance,browserTime:b},c.binding={valueEncoding:M.encodePerformanceTimings},N.page.title&&c.setExtraInfo(m.prototype.VISUAL_NAME,N.page.title),c.shouldEncodeValue=!1,N.saveEvent(c))},acquirePerformanceTiming:function(){var b=a.performance.timing;if(0===b.loadEventEnd)a.setTimeout(N.acquirePerformanceTiming,300);else{var c=H.currentTimestamp()-N.page.initializationTimestamp;N.savePerformanceEvent(c)}},setClientCookies:function(){var a=N.setVisitorCookie();N.setClientSessionCookie(a)},setVisitorCookie:function(){var a=P.get(t.cookies.visitor);if(F.isUndefined(a)){var b=H.uuid();return P.setPersistent(t.cookies.visitor,b),H.log("Set cookie with visitor ID: "+b),!0}return!1},setClientSessionCookie:function(a){var b=P.get(t.cookies.session);if(F.isUndefined(b)){var c=H.uuid()+":"+(a?"0":"1");P.set(t.cookies.session,c),H.log("Set cookie with session ID: "+c)}},registerPlugin:function(a,b){N.plugins[a]=b},removeEventBinding:function(a){for(var b=-1,c=0;c<N.bindings.registered.length;c++){var d=N.bindings.registered[c];d.type===a&&(H.removeEventHandler(d.el,a,d.handler),b=c)}b>=0&&N.bindings.registered.splice(b,1)},removeBindings:function(){F.forEach(N.bindings.registered,function(a){H.removeEventHandler(a.el,a.type,a.handler)}),N.bindings.registered=[],N.bindings.unsupportedEventTypes=[],H.log("Cleared detector bindings.")},getEncoder:function(){return M},supportModeOn:function(a){a=a||!1,N.applySupportMode(),a&&P.set(t.cookies.supportMode,1)},isSupportModeSession:function(){return"undefined"!=typeof P.get(t.cookies.supportMode)},checkSupportModeSession:function(){N.isSupportModeSession()&&N.applySupportMode()},applySupportMode:function(){u.reportAllOnUnload=!1},tryAttachSnapshotToEvent:function(){var a,b=!1;return function(c){"undefined"==typeof a&&(a=N.plugins.domMutationTracker||null),a&&u.domRecordEnabled&&!a.isAborted()&&(b=b||"pageUpdate"===c.type||"mousedown"===c.type||"keydown"===c.type||"unload"===c.type,b&&t.snapshotApplicableEventType.indexOf(c.type)!==-1&&(c.domSnapshot=a.getDomSnapshot()))}}()};i.prototype.toString=function(){return this.url},j.prototype.toString=function(){return"("+this.x+","+this.y+")"};var O={inMemoryMovesCounter:0,notifyEventsFlush:function(){O.inMemoryMovesCounter=0},hasDomUpdate:function(a){return a.domSnapshot&&a.domSnapshot.domChanges},diluteEvents:function(a,b){var c=F.last(a);if(!F.isUndefined(c)){if("resize"===b.type)return"resize"===c.type&&O.removeEventToReport(a,c),!0;if("scroll"===b.type){if("scroll"===c.type||N.page.hasTouch&&"drag"===c.type)return b.timestamp-c.timestamp>u.minStallingScrollTime||(b.selectorExpression=c.selectorExpression,O.removeEventToReport(a,c),u.scrollDebug&&H.trace("Diluted "+c.type+" event:",c),!0);if("mousemove"===c.type&&1===c.value.length&&a.length>=2){var d=a[a.length-2];if("scroll"===d.type){if(b.timestamp-d.timestamp>u.minStallingScrollTime)return!0;b.selectorExpression=d.selectorExpression,O.removeEventToReport(a,c),O.removeEventToReport(a,d),u.scrollDebug&&H.trace("Diluted scroll & mousemove event (mousewheel rolling)"),O.inMemoryMovesCounter--}}return!0}if("mousemove"===b.type&&"mousemove"===c.type){var e=u.reportByPost?3e3:u.mmMaxMovesInEventWithTimes,f=u.reportByPost?3e3:u.mmMaxMovesInEventNoTimes;if(u.mmRecordTimes&&c.value.length>=e||!u.mmRecordTimes&&c.value.length>=f)return u.mmDebug&&H.log("Too much moves in an event: "+c.value.length+". Starting a new move event."),O.inMemoryMovesCounter++,!0;if(!F.isUndefined(u.mmMinStallingMoveTime)&&b.timestamp-c.lastSingleMoveTimestamp>u.mmMinStallingMoveTime)return u.mmDebug&&H.log("Identified mouse move stalling: "+(b.timestamp-c.lastSingleMoveTimestamp)+" ms. Starting a new move event."),O.inMemoryMovesCounter++,!0;if(O.checkExceededInMemoryMoves())return u.mmDebug&&H.log("Exceeded in memory mouse moves ("+u.mmMaxInMemoryMoves+") ignoring..."),!1;O.removeEventToReport(a,c);var g=O.diluteMoveEvents(c,b);return g&&O.inMemoryMovesCounter++,!0}}return"mousemove"===b.type&&O.inMemoryMovesCounter++,!0},removeEventToReport:function(a,b){O.hasDomUpdate(b)||a.splice(F.indexOf(a,b),1)},checkExceededInMemoryMoves:function(){var a=u.reportByPost?3e3:u.mmMaxInMemoryMoves;return O.inMemoryMovesCounter>=a},diluteMoveEvents:function(a,b){var c=F.last(a.value),d=b.value[0],e=b.timestamp-a.lastSingleMoveTimestamp,f=a.getExtraInfo(a.FOCUS_TIME_ATTR),g=Math.abs(c.x-d.x)>u.mmDiluteMinPixels||Math.abs(c.y-d.y)>u.mmDiluteMinPixels;return g?(d.t=e,f+=e,b.setExtraInfo(b.FOCUS_TIME_ATTR,f),b.timestamp=a.timestamp,a.value.push(d),b.value=a.value,u.mmDebug&&H.log("updated mousemove value"+b.value),!0):(b.setExtraInfo(b.FOCUS_TIME_ATTR,f),b.timestamp=a.timestamp,b.value=a.value,b.lastSingleMoveTimestamp=a.lastSingleMoveTimestamp,u.mmDebug&&H.log("Diluting mousemove less than "+u.mmDiluteMinPixels+" pixels: "+d),!1)},truncateEventsForUnload:function(a){for(var b=[],c=u.mmMaxMovesWithUnload,d=0,e=!1,f=0;f<a.length;f++){var g=a[f];if("mousemove"===g.type){if(d>=u.mmMaxMovesWithUnload){H.trace(u.mmMaxMovesWithUnload+" moves limit exceeded. dropping mousemove event from unload report... ("+d+" moves dropped)"),e=!0;continue}var h=g.value.length,i=O.truncateMouseMoveEvent(g,c-d);d+=i,i<h&&(e=!0)}"unload"===g.type&&e&&g.setExtraInfo(g.MOVES_TRUNCATED,!0),b.push(g)}return b},truncateMouseMoveEvent:function(a,b){var c=a.value.length;return c<b?c:(H.trace("truncating mousemove on unload ("+c+" > "+b+" moves)"),a.value=a.value.slice(0,b),b)}},P={TLDs:["ac","ad","ae","aero","af","ag","ai","al","am","an","ao","aq","ar","arpa","as","asia","at","au","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","biz","bj","bm","bn","bo","br","bs","bt","bv","bw","by","bz","ca","cat","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","com","coop","cr","cu","cv","cx","cy","cz","de","dj","dk","dm","do","dz","ec","edu","ee","eg","er","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb","gd","ge","gf","gg","gh","gi","gl","gm","gn","gov","gp","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","info","int","io","iq","ir","is","it","je","jm","jo","jobs","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","me","mg","mh","mil","mk","ml","mm","mn","mo","mobi","mp","mq","mr","ms","mt","mu","museum","mv","mw","mx","my","mz","na","name","nc","ne","net","nf","ng","ni","nl","no","np","nr","nu","nz","om","org","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","pro","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","st","su","sv","sy","sz","tc","td","tel","tf","tg","th","tj","tk","tl","tm","tn","to","tp","tr","travel","tt","tv","tw","tz","ua","ug","uk","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","xxx","ye","yt","za","zm","zw","servizi"],defaults:{path:"/"},get:function(a){var c=b.cookie;return c!==P._cacheString&&P._populateCache(c),P._cache[a]},set:function(a,c,d){var e={path:d&&d.path||P.defaults.path,domain:d&&d.domain||P.getDefaultDomain(),secure:d&&"undefined"!=typeof d.secure?d.secure:P.defaults.secure,expires:d&&"undefined"!=typeof d.expires?d.expires:P.defaults.expires};"undefined"==typeof c&&(e.expires=-1,c=""),e.expires=P.transformExpiresParameterToStandardForm(e.expires);var f=encodeURIComponent(a)+"="+(c+"").replace(/[^!#-+\--:<-\[\]-~]/g,encodeURIComponent);f+=e.path?";path="+e.path:"",f+=e.domain?";domain="+e.domain:"",f+=e.expires?";expires="+e.expires.toGMTString():"",f+=e.secure?";secure":"",b.cookie=f},expire:function(a,b){return P.set(a,c,b)},transformExpiresParameterToStandardForm:function(a){switch(typeof a){case"number":return new Date((new Date).getTime()+1e3*a);case"string":return new Date(a)}return a},setPersistent:function(a,b,c){c=c||15768e4;var d={expires:c};P.set(a,b,d)},isClarisiteCookieKey:function(a){for(var b in t.cookies)if(t.cookies.hasOwnProperty(b)&&t.cookies[b]===a)return!0;return!1},_populateCache:function(a){P._cache={},P._cacheString=a;for(var b=P._cacheString.split("; "),d=0;d<b.length;d++){var e,f,g=b[d],h=g.indexOf("=");try{if(e=decodeURIComponent(g.substr(0,h)),!P.isClarisiteCookieKey(e))continue;f=decodeURIComponent(g.substr(h+1))}catch(a){H.log("Error: Failed decoding a cookie "+(e?"[key="+e+"]":"")+" from document.cookie: "+g,a);continue}P._cache[e]===c&&(P._cache[e]=f)}},getDefaultDomain:function(){return F.isString(P.defaults.domain)||(P.defaults.domain=P.constructCookiesTopLevelDomain(),H.log("Set default cookie domain to: "+P.defaults.domain)),P.defaults.domain},constructCookiesTopLevelDomain:function(){var b=u.customTLD||P.resolveTopLevelDomain(a.location.host);return b&&"localhost"!==b?"."+b:null},resolveTopLevelDomain:function(a){var b=a.indexOf(":");b!==-1&&(a=a.slice(0,b));var c=a.split(".");"www"===c[0]&&"com"!==c[1]&&c.shift();for(var d,e=c.length,f=e,g=c[e-1].length,h=[];d=c[--f];)if(h.unshift(d),0===f||f<e-2||d.length<g||F.indexOf(P.TLDs,d,!0)<0)return h.join(".");return H.log("Failed resolving top level domain for host: "+a),null}};l.prototype.get=function(a){return this.map[a]},l.prototype.set=function(a,b){this.map[a]=b,this.writeToCookie()},l.prototype.toMap=function(a){if(F.isUndefined(a))return{};for(var b=a.split(";"),c=0;c<b.length;c++){var d=b[c].split(":");2!==d.length?H.log("Bad format in parsing cookie string: "+a):this.set(d[0],d[1])}return this.map},l.prototype.toString=function(){var a="";for(var b in this.map)this.map.hasOwnProperty(b)&&(a+=(0===a.length?"":";")+b+":"+this.map[b]);return a},l.prototype.readFromCookie=function(){return this.toMap(P.get(this.cookieName))},l.prototype.writeToCookie=function(){P.set(this.cookieName,this.toString())};var Q={BT:{CLICKS_WITH_NO_MOUSE_MOVES:{code:"1",active:!0},NOT_TRUSTED_MOUSEEVENT:{code:"3",active:!0},INVALID_NAVIGATION_API_VALUES:{code:"4",active:!0},MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES:{code:"5",active:!0}},HU:{MANY_MOUSE_MOVES_BETWEEN_CLICKS:{code:"-1",active:!0}},mouseMoveOccurred:!1,mouseEnterOccurred:!1,mouseDownOccurred:!1,lastMouseDownCoordinate:null,firstMoveCoordinate:null,firstMoveTimestamp:0,mouseMoveClickAllowedTimeDiff:100,mouseMovesCounter:0,detected:{robot:!1,human:!1},active:!1,session:{map:new l(t.cookies.robot),names:{DETECT:"d",NON_HUMAN_COUNT:"nh"}},init:function(){if(Q.isSessionDetected()){var a=Q.isSessionRobotDetected();return void H.log("Session was already detected as: "+(a?"BOT":"HUMAN"))}Q.active=!0,Q.createMouseHandlers()},stopDetection:function(){Q.removeAllHandlers(),Q.active=!1},isActive:function(){return Q.active},createMouseHandlers:function(){H.addEventHandler(b.body,"mousemove",Q.mouseMoveHandler,!0),H.addEventHandler(b.body,"click",Q.mouseClickHandler,!0)},mouseMoveHandler:function(a){return Q.mouseMoveOccurred||(Q.firstMoveCoordinate=H.getCoordinate(a),Q.firstMoveTimestamp=H.currentTimestamp()),Q.mouseMoveOccurred=!0,Q.mouseDownOccurred&&Q.mouseMovesCounter++,!0},mouseEnterHandler:function(){return Q.mouseEnterOccurred=!0,Q.removeMouseHandler("mouseenter",Q.mouseEnterHandler),!0},mouseClickHandler:function(a){return Q.notifyMouseAction(a),!0},removeAllHandlers:function(){Q.removeMouseHandler("mousemove",Q.mouseMoveHandler),Q.removeMouseHandler("click",Q.mouseClickHandler)},removeMouseHandler:function(a,c){try{H.removeEventHandler(b.body,a,c)}catch(b){H.log("BotDetector failed to remove "+a+" listener. "+b.message(),b)}},checkTrusted:function(a){Q.BT.NOT_TRUSTED_MOUSEEVENT.active&&"isTrusted"in a&&a.isTrusted===!1&&Q.robotDetected(Q.BT.NOT_TRUSTED_MOUSEEVENT)},checkMouseMovesBetweenClicks:function(a){if("mousedown"===a.type){Q.mouseDownOccurred=!0;var b=H.getCoordinate(a);null!==Q.lastMouseDownCoordinate?Q.HU.MANY_MOUSE_MOVES_BETWEEN_CLICKS.active&&!H.isSameCoordinates(b,Q.lastMouseDownCoordinate)?Q.mouseMovesCounter>=10&&Q.humanDetected(Q.HU.MANY_MOUSE_MOVES_BETWEEN_CLICKS):Q.BT.CLICKS_WITH_NO_MOUSE_MOVES.active&&H.isCoordinatesDistLargerThan(b,Q.lastMouseDownCoordinate,10)&&0===Q.mouseMovesCounter&&Q.robotDetected(Q.BT.CLICKS_WITH_NO_MOUSE_MOVES):Q.mouseMoveOccurred&&Q.checkDifferentCoordinatesAndTimes(a),Q.mouseMovesCounter=0,Q.lastMouseDownCoordinate=b}},checkDifferentCoordinatesAndTimes:function(a){if(Q.BT.MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES.active){var b=H.getCoordinate(a);if(null!==Q.firstMoveCoordinate&&H.isSameCoordinates(b,Q.firstMoveCoordinate)&&H.currentTimestamp()-Q.firstMoveTimestamp<Q.mouseMoveClickAllowedTimeDiff){var c=Q.session.map.get(Q.session.names.NON_HUMAN_COUNT);if(F.isUndefined(c))Q.session.map.set(Q.session.names.NON_HUMAN_COUNT,1);else{var d=parseInt(c);isNaN(d)&&(H.log("Bad format of non human counter in the robot cookie: "+Q.session.map.toString()),d=1),d++,Q.session.map.set(Q.session.names.NON_HUMAN_COUNT,d),Q.robotDetected(Q.BT.MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES),Q.BT.MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES.active=!1}}}},notifyMouseAction:function(a){"mousedown"===a.type&&Q.checkMouseMovesBetweenClicks(a),Q.checkTrusted(a)},notifyInvalidNavigationAPIValues:function(){Q.BT.INVALID_NAVIGATION_API_VALUES.active&&Q.robotDetected(Q.BT.INVALID_NAVIGATION_API_VALUES)},reportRobotDetection:function(a){var b=N.createEventObject("botDetection",H.currentTimestamp(),null);b.value=a.code,b.shouldEncodeValue=!1,N.saveEvent(b)},robotDetected:function(a){Q.active&&(H.log("BotDetector has detected a bot with type: "+a.code),Q.reportRobotDetection(a),a.active=!1,Q.markSession(Q.session.names.DETECT,a.code),Q.detected.robot=!0,Q.stopDetection())},humanDetected:function(a){H.log("Human Detected ["+a.code+"]"),Q.detected.human=!0,Q.markSession(Q.session.names.DETECT,a.code),Q.stopDetection()},markSession:function(a,b){Q.session.map.set(a,b)},isSessionDetected:function(){var a=Q.session.map.get(Q.session.names.DETECT);return!F.isUndefined(a)},isSessionRobotDetected:function(){var a=Q.session.map.get(Q.session.names.DETECT);if(F.isUndefined(a))return!1;var b=parseInt(a);return!isNaN(b)&&b>0},isSessionHumanDetected:function(){var a=Q.session.map.get(Q.session.names.DETECT);if(F.isUndefined(a))return!1;var b=parseInt(a);return!isNaN(b)&&b<0}};N.checkElementChangebility=function(a){var b=a.nodeName,c=a.type,d=!1,e=!1;switch(b){case"SELECT":e=!0;break;case"TEXTAREA":d=!0;break;case"INPUT":if(null===c)break;switch(c){case"checkbox":case"radio":e=!0;break;case"text":case"password":case"number":case"file":case"url":case"search":case"email":case"date":case"time":case"tel":case"range":case"month":case"week":case"datetime":case"datetime-local":case"color":d=!0}}return{isTypable:d,isSelectable:e}},N.isTypableElement=function(a){var b=N.checkElementChangebility(a);return b.isTypable},N.isSelectableElement=function(a){var b=N.checkElementChangebility(a);return b.isSelectable},N.isChangebleElement=function(a){return N.isTypableElement(a)||N.isSelectableElement(a)},N.directValueInputTypes=["text","number","file","url","search","email","date","time","tel","range","month","week","datetime","datetime-local","color","radio"],N.extractElementValue=function(a,b){var c=b.nodeName,d=H.getElementId(b);if(F.contains(u.maskList,d)||b.hasAttribute(t.maskingAttribute)||H.hasClassName(b,"cls_mask")||u.maskClassList.length>0&&H.hasOneOfClassNames(b,u.maskClassList)){var e=b.value;return"string"==typeof e?new Array(e.length+1).join("*"):void H.log("Error masking value for element:  "+(d?d:b)+" . Value is not a String.")}if("INPUT"===c){var f=b.type;if(F.contains(N.directValueInputTypes,f))return b.value;if("checkbox"===f)return b.checked?"true":"false";if("password"===f){var g=b.value;if(u.extractPasswords)return g;if("string"==typeof g)return new Array(g.length+1).join("*")}}else{if("TEXTAREA"===c)return b.value;if("SELECT"===c){var h=b.options;if(!F.isUndefined(h)&&"number"==typeof h.length&&h.length>0){if(!F.isUndefined(b.multiple)&&b.multiple){var i=N.extractMultipleSelectValues(h);return"["+i.join(",")+"]"}if(!F.isUndefined(b.selectedIndex)&&!F.isUndefined(h[b.selectedIndex]))return h[b.selectedIndex].value}}}},N.extractElementSource=function(a,b){var c=b.src||b.href;return F.isUndefined(c)||null==c?void 0:c},N.extractLocationHash=function(a,b){return H.getLocationUrlSplitByHash().hash},N.extractMultipleSelectValues=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d.selected&&b.push(d.value)}return b},N.extractScrollValue=function(a,b){var c=H.getScrollTopLeft();return new j(c.left,c.top)},N.extractMouseMoveValue=function(a,b){return[H.getCoordinate(a)]},N.extractErrorValue=function(a,b){var c="";return"string"==typeof a.message&&(c+=a.message),"string"==typeof a.url?c+="; URL: "+a.url:"string"==typeof a.filename&&(c+="; FILE: "+a.filename),"number"==typeof a.lineno&&(c+="; L: "+a.lineno),"number"==typeof a.colno&&(c+="; C: "+a.colno),c},m.prototype={toString:function(){return this.type},setExtraInfo:function(a,b){return F.isUndefined(b)?void H.log("Failed setting value for extra info attribute: "+a+". Value is undefined"):(F.isUndefined(this.extraInfo)&&(this.extraInfo={}),void(this.extraInfo[a]=b))},getExtraInfo:function(a){if(F.isUndefined(this.extraInfo))return null;var b=this.extraInfo[a];return"undefined"==typeof b?null:b},setDebugInfo:function(a){F.isUndefined(this.debugInfo)&&(this.debugInfo={}),this.debugInfo=a},getDebugInfo:function(){return this.debugInfo},getSubPage:function(){return this.subPage},addHybridActionDataItem:function(a,b){return F.isUndefined(b)?void H.log("Failed setting value for hybrid action data item: "+a+". Value is undefined"):(F.isUndefined(this.hybridActionData)&&(this.hybridActionData={}),void(this.hybridActionData[a]=b))},getdHybridActionData:function(){return this.hybridActionData}},m.prototype.FOCUS_TIME_ATTR="focusTime",m.prototype.AUTO_COMPLETE_ATTR="autoComplete",m.prototype.VISUAL_NAME="visualName",m.prototype.TIME_SINCE_LAST_EVENT="timeSinceLastIdle",m.prototype.COORDINATE_ATTR="coordinate",m.prototype.SCROLL_REACH="scrollReach",m.prototype.MOVES_TRUNCATED="truncated",m.prototype.LOST_EVENTS_NUM="lostEvents",m.prototype.TP_INTEGRATION_TYPE="tpIntegrationType",m.prototype.EXTERNAL_ID="externalId",m.prototype.SYNC_COORDINATE="syncCoordinates",m.prototype.extraInfoAttrs=[{name:m.prototype.FOCUS_TIME_ATTR,encodeName:"ft",encodeFunc:M.encodeNumber,encodeCode:t.dictionary.encodeEncodingType("cd_number")},{name:m.prototype.AUTO_COMPLETE_ATTR,encodeName:"ac",encodeFunc:M.encodeBoolean,encodeCode:t.dictionary.encodeEncodingType("cd_boolean")},{name:m.prototype.VISUAL_NAME,encodeName:"vn",encodeFunc:M.encodeString,encodeCode:t.dictionary.encodeEncodingType("cd_string")},{name:m.prototype.TIME_SINCE_LAST_EVENT,encodeName:"tl",encodeFunc:M.encodeNumber,encodeCode:t.dictionary.encodeEncodingType("cd_number")},{name:m.prototype.COORDINATE_ATTR,encodeName:"co",encodeFunc:M.encodeCoordinate64,encodeCode:t.dictionary.encodeEncodingType("cd_coordinate")},{name:m.prototype.SCROLL_REACH,encodeName:"sr",encodeFunc:M.encodeNumber,encodeCode:t.dictionary.encodeEncodingType("cd_number")},{name:m.prototype.MOVES_TRUNCATED,encodeName:"tr",encodeFunc:M.encodeBoolean,encodeCode:t.dictionary.encodeEncodingType("cd_boolean")},{name:m.prototype.LOST_EVENTS_NUM,encodeName:"le",encodeFunc:M.encodeNumber,encodeCode:t.dictionary.encodeEncodingType("cd_number")},{name:m.prototype.TP_INTEGRATION_TYPE,encodeName:"tp",encodeFunc:M.encodeString,encodeCode:t.dictionary.encodeEncodingType("cd_string")},{name:m.prototype.EXTERNAL_ID,encodeName:"ei",encodeFunc:M.encodeString,encodeCode:t.dictionary.encodeEncodingType("cd_string")},{name:m.prototype.SYNC_COORDINATE,encodeName:"sy",encodeFunc:M.encodeCoordinate64,encodeCode:t.dictionary.encodeEncodingType("cd_coordinate")}];var R={showErrorsLRU:new g(20),initialize:function(a){return!!u.reportValidationErrors&&(a.on("init:loaded",R.intercept),!0)},intercept:function(){if(R.jqueryValidatorExist()){H.log("Intercepting jQuery Validator errors.");var a=jQuery.validator.prototype.showErrors;jQuery.validator.prototype.showErrors=function(b){try{if(this.errorList&&this.errorList.length>0)for(var c=0;c<this.errorList.length;c++){var d=this.errorList[c].element,e=this.errorList[c].message,f="SAME - NOT REPORTING",g=K.getSelectorExpression(d)||t.encoding.rootSelector,h=R.showErrorsLRU.set(g,e);if(null===h||F.isUndefined(h))f="NEW";else if(h!==e)f="UPDATE";else if(h===e){var i=this.errorsFor(d);i&&i.length>0&&!F.isUndefined(i[0].innerHTML)&&(i[0].innerHTML===e&&jQuery(i[0]).is(":visible")||(f="SHOW"))}var j=new n(d,e,g);H.trace("Validation error identified: "+j+" | "+f),"NEW"!==f&&"UPDATE"!==f&&"SHOW"!==f||G.emit("jquery:validationError",j)}}catch(a){H.log("Failed intercepting showErrors for validation error report. "+a.message,a)}a.call(this,b)}}},jqueryValidatorExist:function(){try{return jQuery.validator}catch(a){return!1}}};n.prototype.toString=function(){var a=H.getElementId(this.element);return(a?a:this.element.name?this.element.name:this.element)+' > "'+this.message+'"'},N.registerPlugin("formValidationInterceptor",R);
var S={initialize:function(a){return!(!u.SCIntegration||"undefined"==typeof u.SCIntegrationURLsContainList||"undefined"==typeof u.SCIntegrationKeyList||0===u.SCIntegrationKeyList.length)&&(a.on("init:preloaded",S.intercept),H.log("Intercepting SiteCatalyst reports."),!0)},intercept:function(){var b=a.Image;a.Image=function(a,c){var d=function(){try{if(e.src&&L.isUrlToReport(e.src,u.SCIntegrationURLsContainList)){H.trace("Image thirdparty intercepted: "+e.src);var a=L.parseToKVMap(e.src,u.SCIntegrationKeyList);if(a){var b=new o(a);G.emit("3rdpartymap:scReport",b)}}}catch(a){H.log("Error while checking image "+e.src+" for SC integration: "+a.message,a)}},e=new b(a,c);try{e.addEventListener("load",d)}catch(a){H.log("Failed intercepting Image constructor for SC integration. "+a.message,a)}return e}}};o.prototype.toString=function(){return this.type+": "+this.data},N.registerPlugin("SCIntegration",S),N.extractVisualName=function(a,b){if(b&&H.isElement(b)&&!F.contains(u.visualName.filterNamingByTagName,b.tagName.toLocaleLowerCase())){var c=H.getAttributeForElement(b,u.visualName.CLS_NAME_ATTR);!c&&u.visualName.by.title&&(c=H.getAttributeForElement(b,"title")),!c&&u.visualName.by.alt&&(c=H.getAttributeForElement(b,"alt")),!c&&u.visualName.by.inlineText&&(c=N.getInlineText(b)),!c&&u.visualName.by.placeholder&&(c=H.getAttributeForElement(b,"placeholder")),c||!u.visualName.by.inputConsts&&!u.visualName.by.inputButtonsValue||(c=N.getInputNames(b)),!c&&u.visualName.by.name&&(c=H.getAttributeForElement(b,"name")),!c&&u.visualName.by.id&&(c=H.getAttributeForElement(b,"id")),!c&&u.visualName.by.parent&&(c=N.getVNByParent(b)),!c&&u.visualName.by.child&&(c=N.getVNByChild(b)),c&&(c.length>u.visualName.chatLimit&&(c=c.substr(0,u.visualName.chatLimit).concat("...")),a.setExtraInfo(m.prototype.VISUAL_NAME,c))}},N.getVNByChild=function(a){if(!F.contains(u.visualName.elementListToCheckChild,a.tagName.toLocaleLowerCase()))return null;var b;if(1===a.childElementCount){var c=a.firstElementChild;b=H.getAttributeForElement(c,"title")||H.getAttributeForElement(c,"alt")||H.getAttributeForElement(c,"name")||H.getAttributeForElement(c,"id")}return b||null},N.getVNByParent=function(a){if(!F.contains(u.visualName.elementListToCheckParent,a.tagName.toLocaleLowerCase()))return null;var b=null,c=a.parentElement;return!c||"a"!==c.tagName.toLocaleLowerCase()&&"button"!==c.tagName.toLocaleLowerCase()||(b=H.getAttributeForElement(c,"title")||H.getAttributeForElement(c,"alt")||H.getAttributeForElement(c,"name")||H.getAttributeForElement(c,"id")),b||null},N.getInlineText=function(a){var b=a.tagName.toLocaleLowerCase();if("td"===b)return null;var c=H.getAttributeForElement(a,"class");if(c&&F.contains(u.visualName.filterInlineTextByClassName,c))return null;var d;if(("span"===b||"div"===b)&&1===a.childElementCount&&(d=a.firstElementChild,d&&"a"===d.tagName.toLocaleLowerCase()&&0===d.childElementCount)){var e=d.innerText;return e&&(e=H.trim(e)),e||null}if(F.contains(u.visualName.filterInlineTextByTagName,b)){var f=a.parentElement?a.parentElement.tagName.toLocaleLowerCase():"";if("a"!==f&&"button"!==f)return null}var g=null;return 0===a.childElementCount&&(g=a.innerText,g&&(g=H.trim(g))),g||1===a.childElementCount&&(d=a.firstElementChild,0===d.childElementCount&&(g=d.innerText,g&&(g=H.trim(g)))),g||null},N.getInputNames=function(a){var b;if("input"===a.tagName.toLocaleLowerCase()){var c=a.type.toLocaleLowerCase();if("button"!==c&&"submit"!==c&&"reset"!==c||!u.visualName.by.inputButtonsValue||(b=a.value),!b&&u.visualName.by.inputConsts)switch(c){case"password":b="Password";break;case"button":case"submit":case"image":b="Submit";break;case"file":b="Choose File";break;case"reset":b="Reset"}}return b&&(b=H.trim(b)),b||null},N.triggerCustomEvent=function(a,b,c){try{if(F.isUndefined(a)||!F.isString(a)||0===a.length||F.isUndefined(b))return void H.log("triggerCustomEvent: bad argument: eventName="+a+" eventValue="+b);var d={name:""+a,val:""+b,domEl:c};N.saveCustomEvent(d)}catch(d){H.log("triggerCustomEvent: error while triggering event with name="+a+" value="+b+"domElement="+c,d.stack?d.stack:d.message)}};var T={handlers:{open:[],send:[],load:[],error:[]},blackList:["adrum","dynaTrace","appdynamics.com","tealeaf"],initialize:function(a){return!!u.interceptAjax&&(T.supportAjaxOnProgressEvents()?(a.on("init:preloaded",T.intercept),H.log("Intercepting AJAX calls."),!0):(H.log("Ajax interception not supported."),!1))},isClsOwnAjax:function(a){return a.cls_own},intercept:function(){var a=XMLHttpRequest.prototype.open,c=XMLHttpRequest.prototype.send;return a&&c?(XMLHttpRequest.prototype._oldOpen=a,XMLHttpRequest.prototype._oldSend=c,XMLHttpRequest.prototype.open=function(){var a=this;if(!T.isClsOwnAjax(a)){var b;try{a.interception={},arguments.length>0&&(a.interception.method=arguments[0]),arguments.length>1&&(a.interception.url=b=arguments[1]),arguments.length>2&&(a.interception.async=arguments[2]),a.interception.uuid=H.uuid(),G.emit("ajax:open",new p(a,H.currentTimestamp())),u.ajaxDebug&&H.trace("AJAX open intercepted",a)}catch(a){H.log("Exception occurred when intercepting ajax 'open' for url: "+b+" Error: "+a.message,a)}}XMLHttpRequest.prototype._oldOpen.apply(this,arguments)},void(XMLHttpRequest.prototype.send=function(){var a=this;if(!T.isClsOwnAjax(a)){try{if(a.interception&&T.shouldIgnoreAjaxUrl(a.interception.url))return void H.trace("Ajax filter black-listed url: "+a.interception.url);var c=arguments[0],d=new p(a,H.currentTimestamp());arguments.length>0&&(d.data=c),G.emit("ajax:send",d),u.ajaxDebug&&H.trace("AJAX send intercepted",a)}catch(a){H.log("Exception occurred when intercepting ajax 'send'.  Error: "+a.message,a)}var e=function(){G.emit("ajax:load",new p(a,H.currentTimestamp())),u.ajaxDebug&&H.trace("AJAX load intercepted",a)},f=function(){G.emit("ajax:error",new p(a,H.currentTimestamp())),u.ajaxDebug&&H.trace("AJAX error intercepted",a)},g=function(){return u.ajaxDebug&&H.trace("AJAX onLoadstart intercepted",a),a.interception?(a.interception.startTime=H.currentTimestamp(),void(a.interception.lastFocusedElement=b.activeElement)):void H.trace("AJAX onLoadstart - missing cls xhr interception data")},h=function(){if(u.ajaxDebug&&H.trace("AJAX onLoadend intercepted",a),!a.interception)return void H.trace("AJAX onLoadend - missing cls xhr interception data for url: "+(a.responseURL||""));var b=H.currentTimestamp(),c=new p(a,b);a.interception.startTime>0?c.duration=b-a.interception.startTime:c.duration=-1,c.lastFocusedElement=a.interception.lastFocusedElement,c.status=a.status,c.statusText=a.statusText,G.emit("ajax:loadend",c)};try{a.addEventListener("load",e,!1),a.addEventListener("error",f,!1),a.addEventListener("loadstart",g,!1),a.addEventListener("loadend",h,!1)}catch(a){H.log("Exception occurred when intercepting ajax 'send'.  Error: "+a.message,a)}}XMLHttpRequest.prototype._oldSend.apply(this,arguments)})):void H.log("WARNING: cannot intercept ajax, XMLHttpRequest prototype was altered (likely, by some loaded earlier 3rd party library).")},supportAjaxOnProgressEvents:function(){var a=new XMLHttpRequest;return"onloadend"in a},shouldIgnoreAjaxUrl:function(a){for(var b=0;b<T.blackList.length;b++)if(a.indexOf(T.blackList[b])>=0)return!0;return!1}};p.prototype.toString=function(){return this.method+" "+this.url+(this.duration?" "+(this.duration+"ms."):"")+(this.status?" "+this.status:"")},N.registerPlugin("ajaxInterceptor",T);var U={initialize:function(b){return!!u.recordWebSocket&&(a.WebSocket?(b.on("init:preloaded",U.intercept),H.log("Intercepting WebSocket frames."),!0):(H.log("This browser does not support WebSocket."),!1))},intercept:function(){var b=a.WebSocket,c=b.prototype.send;if(!c)return void H.log("WARNING: cannot intercept WS communication, WebSocket prototype was altered (likely, by some loaded earlier 3rd party library).");var d={},e=function(a){return""!==a},f=function(a){var b=a.split(/:\/\/|[^a-zA-Z\d]/).filter(e).join("_"),c=d[b]||0;return d[b]=c+1,c+"_"+b};a.WebSocket=function(a,c){
// #preserve native
var d=c?new b(a,c):new b(a);try{d._id=f(d.url),H.log("WebSocket creation intercepted. id: "+d._id);var e=function(a){var b=new r(d._id,!0,a.data,H.currentTimestamp());G.emit("websocket:frame",b)},g=function(a){var b=new q(d._id,a,H.currentTimestamp());H.trace("WebSocket open intercepted",d._id),G.emit("websocket:open",b)},h=function(a){var b=new q(d._id,a,H.currentTimestamp());H.trace("WebSocket close intercepted",d._id,a.reason),G.emit("websocket:close",b)},i=function(a){var b=new q(d._id,a,H.currentTimestamp());H.trace("WebSocket error intercepted, id: ",d._id),G.emit("websocket:error",b)};d.addEventListener("message",e),d.addEventListener("open",g),d.addEventListener("close",h),d.addEventListener("error",i)}catch(a){H.log("failed intercepting WebSocket constructor: "+a.message,a)}return d},WebSocket.prototype=b.prototype,WebSocket.prototype.constructor=WebSocket,WebSocket.prototype.send=function(){
// #preserve native
if(this._id){var a=new r(this._id,!1,arguments[0],H.currentTimestamp());G.emit("websocket:frame",a)}else H.log("target WebSocket has no assigned id (not hooked by the detector - check detector's execution timing).");return c.apply(this,[].slice.call(arguments))},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3}};q.prototype.toString=function(){return this.id+" "+this.event.type},r.prototype.isBinary=function(){return!F.isString(this.payload)},r.prototype.toString=function(){return this.id+" "+(this.direction?"IN":"OUT")+" "+(this.isBinary()?"[BINARY]":"[TEXT]")+(this.isBinary()?"len:"+this.payload.byteLength:"payload:"+this.payload)},"undefined"!=typeof N&&N.registerPlugin("webSocketInterceptor",U),s.READY_COOKIE="_cls_ready",s.STATE={INIT:0,HELPING:1,READY:2};var V={name:"POST",ready:!0,corsHelper:new s(b,a.location,u.reportURI),config:{maxReportSize:u.maxPostReportSize,maxReports:-1},gainLockToReport:function(){var a=V.ready;return a&&V.setReady(!1),a},freeLock:function(){V.setReady(!0)},setReady:function(a){V.ready=a},XMLHttpFactories:[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],createXMLHTTPObject:function(){if(V.XMLHttpFactory)return V.XMLHttpFactory();for(var a=!1,b=0;b<V.XMLHttpFactories.length;b++){try{a=V.XMLHttpFactories[b](),V.XMLHttpFactory=V.XMLHttpFactories[b]}catch(a){continue}break}return a},flushEvents:function(a,b){V.corsHelper.isRequired()&&!V.corsHelper.isReady()?V.corsHelper.help(V.createXMLHTTPObject,function(c){V.createRequest(a,b,c)}):V.createRequest(a,b,V.corsHelper.isRequired())},createRequest:function(a,b,c,d){a=a||"",d=d||!1;var e=X.baseURI,f=V.createXMLHTTPObject();if(!f)return H.log("Failed creating an XMLHttpRequest object"),void V.setReady(!0);f.onreadystatechange=function(){4===f.readyState&&(200===f.status?V.setReady(!0):u.postRetry&&!d?(H.log("Failed POST data ("+b+"): "+f.status+"  "+f.statusText+" ...retrying..."),V.createRequest(a,b,c,!0)):(V.addFailNotesOnCookie(b,f.status,f.statusText),H.log("Failed "+(u.postRetry?"again ":"")+"POST data ("+b+"): "+f.status+"  "+f.statusText+" . aborting. "),f.abort(),V.setReady(!0)))};try{f.cls_own=!0,f.open("POST",e,!0),f.withCredentials=c,f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(a)}catch(a){H.log("Failed sending POST request ("+b+") to url "+e+": "+a.message,a),V.setReady(!0)}},addFailNotesOnCookie:function(a,b,c){var d=P.get(t.cookies.debuginfo)||"";if(!(d.length>50)){var e="";d.indexOf("|")!==-1&&(e=d.substring(0,d.indexOf("|")));var f=(e?".":"")+a+"|E"+b;P.set(t.cookies.debuginfo,e+f)}}},W={name:"GET",domBeaconImgNum:0,config:{maxReportSize:u.maxReportSize,maxReports:-1},gainLockToReport:function(){return!0},freeLock:function(){},flushEvents:function(a,b){var c=X.baseURI+a;W.createRequest(c)},createRequest:function(a){u.DOMBeaconImg?W.changeImgSrcByDOM(a):W.createImageWithSrc(a)},createImageWithSrc:function(a){var b=new Image;b.src=a},changeImgSrcByDOM:function(a){var c="_cls_beacon_img_"+(new Date).getTime()+" "+W.domBeaconImgNum++,d=b.getElementById(c);null===d&&(d=b.createElement("img"),d.id=c,d.style.width="1px",d.style.height="1px",d.style.visibility="hidden",d.style.position="fixed",b.body&&b.body.appendChild(d)),d.src=a}},X={eventsToReport:[],freshEventsNum:0,reporter:u.reportByPost?V:W,sequenceNumber:0,lastSnapshotEnabledStepType:null,lastPageSnapshotSequence:-1,initialize:function(a){return F.isUndefined(u.reportURI)||0===u.reportURI.length?void console.log("ERROR[EyeView-1401]: Detector script is missing configuration for 'reportURI'. Please add it."):(H.log("Reporting using: "+(u.reportByPost?"POST":"GET")),X.baseURI=u.reportURI,u.reportByPost||(X.baseURI+=u.reportURI.indexOf("?")!==-1?"&":"?"),X.pageId=N.page.id,X.idleLatestEventTime=X.idleBaseTime=H.currentTimestamp(),X.freshStartInd=0,a.on("init:loaded",X.startTimer),a.on("saveEvent",X.saveEvent),a.on("event:document",X.reportOnLoad),a.on("event:unload",X.reportOnUnload),a.on("event:beforeunload",X.reportOnUnload),a.on("reportImmediately",X.reportImmediately),a.on("pageSnapshot",X.onPageSnapshot),!0)},onPageSnapshot:function(a){X.reportImmediately(),P.set(t.cookies.sub_session,H.uuid()),a.cookie=b.cookie,X.lastPageSnapshotSequence=a.seq},startTimer:function(){var a=u.reportByPost?u.reportPostInterval:u.reportInterval;a&&!X.timer&&(X.timer=setInterval(X.reportQueuedEvents,a),H.log("Beacon: events will be reported in intervals of "+a+" ms."))},saveEvent:function(a){var b=O.diluteEvents(X.eventsToReport,a);b&&(N.tryAttachSnapshotToEvent(a),X.eventsToReport.push(a)),X.elapseIdleTimes()},reportOnLoad:function(a){u.reportAllOnUnload&&X.reportQueuedEvents(!0)},reportOnUnload:function(a){H.log("Beacon: unload received, "+X.eventsToReport.length+" events to report."),X.reportQueuedEventsUnload()},reportQueuedEventsUnload:function(){X.eventsToReport.length>0&&(u.reportAllOnUnload||!u.truncateEventsWithUnload||u.reportByPost||(X.eventsToReport=O.truncateEventsForUnload(X.eventsToReport)),X.reportAllCollectedEvents(!0))},hasDependentEventsOnly:function(a,b){for(var c=b;c<a.length;c++)if(!a[c].dependent)return!1;return!0},reportImmediately:function(){X.reportQueuedEvents(!0)},reportQueuedEvents:function(a){try{if(a&&X.eventsToReport.length>0)return void X.reportAllCollectedEvents();if(X.eventsToReport.length>X.freshStartInd)return u.reportAllOnUnload?void(X.freshStartInd=X.eventsToReport.length):X.hasDependentEventsOnly(X.eventsToReport,X.freshStartInd)?void(X.freshStartInd=X.eventsToReport.length):void X.reportAllCollectedEvents();u.idleEventTimeInterval>0&&H.currentTimestamp()-X.idleLatestEventTime>=u.idleEventTimeInterval&&H.currentTimestamp()-X.idleBaseTime<u.maxTimeForIdleEvent&&(X.reportIdleEvent(X.idleLatestEventTime),X.idleLatestEventTime=H.currentTimestamp())}catch(a){H.log("ERROR: while reporting queued events. Exception: ",a.stack?a.stack:a.message)}},elapseIdleTimes:function(){X.idleLatestEventTime=X.idleBaseTime=H.currentTimestamp()},reportAllCollectedEvents:function(a){if(!X.reporter.gainLockToReport())return void H.log("reporter not ready yet. postponing "+X.eventsToReport.length+" events reports.");var b=X.eventsToReport;X.eventsToReport=[];try{X.reportEvents(b,a)}catch(a){H.log("ERROR: while reporting events. Exception: ",a.stack?a.stack:a.message),X.reporter.freeLock()}X.freshStartInd=0,O.notifyEventsFlush()},reportIdleEvent:function(a){var b=N.createEventObject("idle",H.currentTimestamp(),null),c=H.currentTimestamp();if(b.value=c-X.idleBaseTime,b.binding={valueEncoding:M.encodeNumber},b.setExtraInfo(m.prototype.TIME_SINCE_LAST_EVENT,c-a),u.reportAllOnUnload)return void X.eventsToReport.push(b);var d=[b];X.reportEvents(d)},reportEvents:function(a,b){b=b||!1;var c=X.reporter.config.maxReports;!N.config.reportByPost&&b&&(c=u.maxReportsWithUnload),X.encodeAndConcatenateEvents(a,X.reporter.config.maxReportSize,c)},encodeAndConcatenateEvents:function(a,b,c){var d=function(){f++;var a=c!==-1&&f>=c;return a},e=null;c!==-1&&a.length>1&&"unload"===a[a.length-1].type&&(e=a.pop());for(var f=0,g=[],h="",i=0,j=a[0].getSubPage(),k=0;k<a.length;k++){var l=a[k],m=l.getSubPage(),n=j===m,o=F.isUndefined(l.selectorExpression)||null==l.selectorExpression?t.encoding.rootSelector:l.selectorExpression,p=o;t.repeatingElementSelector&&!F.isUndefined(t.repeatingElementSelector)&&(o===t.encoding.rootSelector?h="":o===h?(p=t.repeatingElementSelector,h=o):h=o);var q=M.encodeEventAsString(l,p),r=encodeURIComponent(q);if(F.contains(t.nobelEventTypes,l.type))g.length>0&&X.flushEvents(g,j),X.flushEvents([r],j),g=[],i=0;else{var s=r.length+(0===g.length?0:t.encoding.delimiters.events.length),u=b===-1||i+s<b;if(n&&u)i+=s,g.push(r);else{if(g.length>0){if(d()){if(null!==e){var v=a.length-k;H.log("Reached max number of reports allowed ("+c+"). Lost "+v+" events."),e.setExtraInfo(e.LOST_EVENTS_NUM,v),r=encodeURIComponent(M.encodeEventAsString(e)),g.push(r),X.flushEvents(g,j)}return}X.flushEvents(g,j),g=[],i=0}p===t.repeatingElementSelector&&(q=q.replace(t.repeatingElementSelector,o),r=encodeURIComponent(q)),b!==-1&&r.length>b?(X.flushEvents([r],m),h=""):(g.push(r),i+=r.length)}j=m}}if(g.length>0){if(null!==e){var w=encodeURIComponent(M.encodeEventAsString(e));g.push(w)}X.flushEvents(g,j)}},flushEvents:function(a,b){X.sequenceNumber++;var c=X.buildParamsAsString(b,a,X.sequenceNumber);X.reporter.flushEvents(c,X.sequenceNumber),H.trace("Beacon["+X.sequenceNumber+"]: "+X.reporter.name+" reported "+a.length+" events"+(b.length>0?" [on "+b+"]":""),a)},buildParamsAsString:function(a,b,c){var d=b.join(t.encoding.delimiters.events);return"v="+t.beaconVersion+"&sn="+c+"&p="+X.pageId+(a.length>0?"&sp="+encodeURIComponent(a):"")+(X.lastPageSnapshotSequence!==-1?"&pssn="+X.lastPageSnapshotSequence:"")+"&e="+d}};N.registerPlugin("beaconReport",X),a[N.env.detectorGlobalName]=N,N.initialize()}(window,document);