inputControl.register({type:"email",mask:function(value){var parts=value.split("@");if(parts.length===2){value=parts[0][0]+Array(parts[0].length).join("*")+"@"+parts[1]}return value}});inputControl.register({type:"emailFirstAndLastChar",mask:function(value){var first,last;var parts=value.split("@");if(parts.length===2){first=parts[0][0];last=parts[0].slice(-1);value=first;if(parts[0].length>1){value+=Array(parts[0].length-1).join("*")}if(parts[0].length>2){value+=last}value+="@"+parts[1]}return value}});inputControl.register(function(){var _prefillPattern=/(\*|-){7}-\d{4}/;return{type:"phonePrefill phone",format:function(value,character,cursorPos){cursorPos=cursorPos||value.length;if(_prefillPattern.test(value)){return{value:value,cursorPos:cursorPos}}var backspace=character===8;var parts=[];value=value.replace(/\D/g,"");parts.push(value.substr(0,3));parts.push(value.substr(3,3));parts.push(value.substr(6,4));if(parts[0].length===3&&(!backspace||value.length>3)){parts.splice(1,0,"-")}if(parts[2].length===3&&(!backspace||value.length>6)){parts.splice(3,0,"-")}value=parts.join("");if(cursorPos===3||cursorPos===7){cursorPos++}if(value.charAt(cursorPos)==character){cursorPos++}return{value:value,cursorPos:cursorPos}},mask:function(value){var parts=[];var out;value=value.replace(/[^0-9*]/g,"");parts.push(value.substr(0,3));parts.push(value.substr(3,3));parts.push(value.substr(6,4));out=parts[0].replace(/\d/g,"*");if(parts[0].length===3){out+="-"+parts[1].replace(/\d/g,"*")}if(parts[1].length===3){out+="-"+parts[2]}return out},beforeMask:function(){var $this=$(this);if(!$this.data("preMaskedTest")){$this.data("preMaskedTest",true);if(_prefillPattern.test($this.val())){$this.one("input",function(){setTimeout(function(){$this.select()},100)})}}}}});inputControl.register({type:"ssn ssnPrefill",format:function(value,character,cursorPos){var backspace=character===8;var parts=[];value=value.replace(/[^0-9\*]/g,"");parts.push(value.substr(0,3));parts.push(value.substr(3,2));parts.push(value.substr(5,4));if(parts[0].length===3&&(!backspace||value.length>3)){parts.splice(1,0,"-")}if(parts[2].length===2&&(!backspace||value.length>5)){parts.splice(3,0,"-")}value=parts.join("");if(cursorPos===3||cursorPos===6){cursorPos++}if(value.charAt(cursorPos)==character){cursorPos++}return{value:value,cursorPos:cursorPos}},mask:function(value){return value.replace(/\d/g,"*")}});inputControl.register({type:"businessTaxIdprefill businessTaxId",format:function(value,character,cursorPos){var prefillPattern=/\*{2}-\*{7}/;cursorPos=cursorPos||value.length;if(prefillPattern.test(value)){return{value:value,cursorPos:cursorPos}}var backspace=character===8;var parts=[];value=value.replace(/\D/g,"");parts.push(value.substr(0,2));parts.push(value.substr(2));if(parts[0].length===2&&(!backspace||value.length>2)){parts.splice(1,0,"-")}value=parts.join("");if(cursorPos===2){cursorPos++}if(value.charAt(cursorPos)==character){cursorPos++}return{value:value,cursorPos:cursorPos}},mask:function(value){return value.replace(/\d/g,"*")}});inputControl.register({type:"zip",format:function(value,character,cursorPos){cursorPos=cursorPos||value.length;value=value.replace(/\D/g,"");if(value.length>5){value=value.slice(0,5)+"-"+value.slice(5,9)}if(cursorPos===6){cursorPos++}if(value.charAt(cursorPos)==character){cursorPos++}return{value:value,cursorPos:cursorPos}}});inputControl.register({type:"mmddyyyy mmddyyyyprefill mmddyyyynomask",format:function(value,character,cursorPos){cursorPos=cursorPos||value.length;var backspace=character===8;var parts=[];value=value.replace(/[^0-9\*]/g,"");parts.push(value.substr(0,2));parts.push(value.substr(2,2));parts.push(value.substr(4,4));if(parts[0].length===2&&(!backspace||value.length>2)){parts.splice(1,0,"/")}if(parts[2].length===2&&(!backspace||value.length>4)){parts.splice(3,0,"/")}value=parts.join("");if(cursorPos===2||cursorPos===5){cursorPos++}if(value.charAt(cursorPos)==character){cursorPos++}return{value:value,cursorPos:cursorPos}}});inputControl.register({type:"mmyyyy",format:function(value,character,cursorPos){cursorPos=cursorPos||value.length;var backspace=character===8;var parts=[];value=value.replace(/\D/g,"");parts.push(value.substr(0,2));parts.push(value.substr(2,4));if(parts[0].length===2&&(!backspace||value.length>2)){parts.splice(1,0,"/")}value=parts.join("");if(cursorPos===2){cursorPos++}if(value.charAt(cursorPos)==character){cursorPos++}return{value:value,cursorPos:cursorPos}}});inputControl.register({type:"mmddyyyy mmyyyy mmddyyyyprefill",mask:function(value){return value.replace(/\d/g,"*")}});inputControl.register({type:"accountNumberMask accountNumberMaskExceptLastFour",format:function(value,character,cursorPos){return{value:value.replace(/[^0-9\*]/g,""),cursorPos:cursorPos}},mask:function(value){return value.replace(/d/,"*")}});inputControl.register({type:"accountNumberMaskExceptLastFour",mask:function(value){if(value.length>4){value=value.substr(0,value.length-4).replace(/\d/g,"*")+value.slice(-4)}return value}});inputControl.register({type:"accountLimitSeventeen",format:function(value,character,cursorPos){return{value:value.substr(0,17).replace(/[^0-9\*]/g,""),cursorPos:cursorPos}}});inputControl.register({type:"numericLimitNine",format:function(value,character,cursorPos){return{value:value.substr(0,9).replace(/[^0-9\*]/g,""),cursorPos:cursorPos}}});inputControl.register({type:"integer",format:function(value,character,cursorPos){return{value:value.replace(/\D/g,""),cursorPos:cursorPos}}});inputControl.register({type:"currency",format:function(value,character,cursorPos){value=value.replace(/[^0-9.]/g,"");value=value.replace(/(\.\d{0,2}).*/,"$1");return{value:value,cursorPos:cursorPos}}});inputControl.register({type:"percentage",format:function(value,character,cursorPos){value=value.replace(/[^0-9.]/g,"");value=value.replace(/(\.\d{0,2}).*/,"$1");return{value:value,cursorPos:cursorPos}}});inputControl.register({type:"thousands-separator",format:function(value,character,cursorPos){value=value.replace(/[^0-9.]/g,"");var initialLength=value.length;var parts=value.split(".");var returnValue=parts[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,");if(parts[1]||character==="."){returnValue+="."+parts[1].substr(0,2)}if(returnValue.length>initialLength){cursorPos+=returnValue.length-initialLength}return{value:returnValue,cursorPos:cursorPos}}});var utils=(function($){var getCurrentBreakpoint=function(){var breakpoint="small";if(Foundation.utils.is_medium_only()){breakpoint="medium"}if(Foundation.utils.is_large_up()){breakpoint="large"}return breakpoint};var getDeviceType=function(){var ua=navigator.userAgent;var ipadPattern=/ipad/i;var iphonePattern=/iphone/i;var androidPattern=/android/i;var likeAndroidPattern=/like android/i;if(ipadPattern.test(ua)){return"ipad"}if(iphonePattern.test(ua)){return"iphone"}if(androidPattern.test(ua)&&!likeAndroidPattern.test(ua)){return"android"}return"desktop"};return{getCurrentBreakpoint:getCurrentBreakpoint,getDeviceType:getDeviceType}})(jQuery);var oo_feedback=new OOo.Ocode({disableMobile:false,disableNoniOS:false});var uiBlocker=$(".block-ui");var blockUI=function(modalType,modalText){uiBlocker.show();if(modalType=="processing-modal"){$(".block-ui .processing-modal").show();if(modalText.length>0){$(".block-ui label").text(modalText)}}};var unblockUI=function(){uiBlocker.hide()};function displayPopup(url){var newWindow=window.open(url,"boa_dialog_window","width=750,height=450,resizable,scrollbars");if(newWindow){newWindow.focus()}return false}zAu.confirmRetry=function(msgCode,msg2){if(msgCode=="FAILED_TO_RESPONSE"&&msg2.match("SyntaxError")!==null){window.location="./landingPage.go";return null}else{var msg=msgzk[msgCode];return console.log((msg?msg:msgCode)+"\n"+msgzk.TRY_AGAIN+(msg2?"\n\n("+msg2+")":""))}};var closeWindow=function(){var win=window.open("about:blank","_self");win.close()};if(typeof lpSendData==="undefined"){var lpSendData=function(){}}(function($,window){var $window;var increaseFooterMargin=function(){var footer=$(".footer");var fixedBottomBar=$(".fixed-bottom-bar");if(fixedBottomBar.length){var adjustFooter=function(){if(fixedBottomBar.is(":visible")){footer.css("margin-bottom",fixedBottomBar.outerHeight())}else{footer.css("margin-bottom",0)}};adjustFooter();$window.on("resize orientationchange",adjustFooter)}};var orientScreenWithCoApplicant=function(){var coAppScrollTop;$(".page-container").on("click",".co-applicant-section input",function(){coAppScrollTop=$window.scrollTop()});if(typeof zWatch!="undefined"){zWatch.listen({onResponse:{onResponse:function(){if(coAppScrollTop){$window.scrollTop(coAppScrollTop);coAppScrollTop=0}}}})}};var getExternalUrl=function(){var link=$(".external-link"),button=$(".modal-continue"),url;link.click(function(e){e.preventDefault();url=$(this).attr("href");if(url.trim()){button.attr("href",url)}})};var handleCheckboxLinks=function(){$(".page-container").on("click","label a[href]",function(e){e.preventDefault();if(this.getAttribute("target")==="_blank"){window.open(this.href,"_blank")}else{window.location=this.href}return false})};var correctBrokenZoomSpacing=function(){if(/chrome/i.test(navigator.userAgent)&&!/chrome\/(5|6)\d/i.test(navigator.userAgent)&&!/edge/i.test(navigator.userAgent)){if(Foundation.utils.is_large_up()){$(".text-box input").css({"margin-top":"0","padding-top":"1.825rem"});$(".text-box_hint-text").css("margin-top","0.5rem")}else{$(".text-box input").css({"margin-top":"0","padding-top":"2.125rem"});$(".text-box_hint-text").css("margin-top","0.8rem")}}if(/firefox/i.test(navigator.userAgent)){if(Foundation.utils.is_large_up()){$(".text-box input").css({"margin-top":"1rem","padding-top":"0"});$(".text-box_hint-text").css("margin-top","0")}else{$(".text-box input").css({"margin-top":"1.1rem","padding-top":"0"});$(".text-box_hint-text").css("margin-top","0")}}};var flyover=function(){var triggers=$(".flyover-trigger");var targets=$(".flyover-target");var closeButtons=$(".flyover-close");targets.hide();triggers.on("click",function(){var $this=$(this);var target=$("."+$this.data("target"));if($this.hasClass("open")){target.hide();$this.removeClass("open")}else{var leftPos;if($this.data("align-to")){leftPos=$($this.data("align-to")).position().left}else{leftPos=$this.position().left}target.css({left:leftPos,top:$this.height()});target.show();$this.addClass("open")}});closeButtons.on("click",function(){var targetFlyover=$(this).parents(".flyover-target");targetFlyover.hide();var classes=targetFlyover[0].className.split(/\s+/);$.each(classes,function(i,className){var trigger=triggers.filter('[data-target="'+className+'"]');if(trigger.length){trigger.removeClass("open");return false}})})};$(function(){$window=$(window);$('nav[class="top-bar"]').attr("data-topbar","");$("form").not("#affinityReturnForm").submit(function(e){e.preventDefault()});$(".info-box").find("p:empty, br").remove();$("#ecd-print-link").on("click",function(){displayPopup("/applynow/zk/ConsumerDeposits/PersonalInformation/eCDPrintView.zul")});$(window).on("resize",Foundation.utils.throttle(function(){correctBrokenZoomSpacing()},300));setTimeout(function(){correctBrokenZoomSpacing()},110);increaseFooterMargin();orientScreenWithCoApplicant();getExternalUrl();handleCheckboxLinks();flyover()});$(document).foundation({reveal:{animation:"fade",animation_speed:0,close_on_background_click:false,dismiss_modal_class:"modal-close"}})})(jQuery,window);(function($){var toggleProgressBarClasses=function(){var stepCounter=$("#step-counter"),stepMeter=$("#step-meter"),stepMeterInner=$("#step-meter-inner"),step1=$("#step-1-circle, #step-1-label"),step2=$("#step-2-circle, #step-2-label"),step3=$("#step-3-circle, #step-3-label"),step4=$("#step-4-circle, #step-4-label"),step5=$("#step-5-circle, #step-5-label"),progress_5step=$(".progress--v3"),progress_4step=$(".progress--v4");if(progress_5step.length>0){switch(stepCounter.text()){case"1":step1.addClass("active");stepMeter.attr("style","width: 0;");break;case"2":step1.addClass("active");stepMeterInner.show().attr("style","background: #36c;");stepMeter.attr("style","width:15%;");break;case"3":step1.removeClass("active").addClass("done");step2.addClass("active");stepMeter.attr("style","width: 26%;");break;case"4":step1.addClass("done");step2.removeClass("active").addClass("done");step3.addClass("active");stepMeter.attr("style","width:52%;");break;case"5":step1.addClass("done");step2.addClass("done");step3.removeClass("active").addClass("done");step4.addClass("active");stepMeter.attr("style","width: 76%;");break;case"6":step1.addClass("done");step2.addClass("done");step3.addClass("done");step4.removeClass("active").addClass("done");step5.addClass("active");stepMeter.attr("style","width: 100%;");break}}else{if(progress_4step.length>0){switch(stepCounter.text()){case"1":step1.addClass("active");stepMeter.attr("style","width: 0;");break;case"2":step1.removeClass("active").addClass("done");step2.addClass("active");stepMeter.attr("style","width: 34%;");break;case"3":step1.addClass("done");step2.removeClass("active").addClass("done");step3.addClass("active");stepMeter.attr("style","width: 68%;");break;case"4":step1.addClass("done");step2.addClass("done");step3.removeClass("active").addClass("done");step4.addClass("active");stepMeter.attr("style","width: 100%;");break}}else{switch(stepCounter.text()){case"1":step1.addClass("active");stepMeter.attr("style","width: 0;");break;case"2":step1.removeClass("active").addClass("done");step2.addClass("active");stepMeter.attr("style","width: 34%;");break;case"3":step1.addClass("done");step2.removeClass("active").addClass("done");step3.addClass("active");stepMeterInner.show().attr("style","margin-left: 86%; background: #36c;");stepMeter.attr("style","width: 78.75%;");break;case"4":step1.addClass("done");step2.addClass("done");step3.addClass("active");stepMeterInner.show().attr("style","margin-left: 76%; background: #36c;");stepMeter.attr("style","width: 89%;");break;case"5":step1.addClass("done");step2.addClass("done");step3.addClass("active");stepMeterInner.show().attr("style","margin-left: 68%; background: #36c;");stepMeter.attr("style","width: 100%;");break;case"6":step1.addClass("done");step2.addClass("done");step3.removeClass("active").addClass("done");step4.addClass("active");stepMeter.attr("style","width: 100%;");break}}}};var resizeProgressBar=function(){var $stepsList=$(".progress-bar-list"),steps=$(".progress-bar-list span.step-circle"),$stepMeterParent=$("#step-meter").parent();var stepMeterWidth=(100*$stepMeterParent.width()/$stepMeterParent.parent().width());var stepsListWidth=(100*$stepsList.width()/$stepsList.parent().width());var alignFactor=(100*stepMeterWidth/stepsListWidth)-1;var totalSteps=steps.length;for(var i=1;i<=totalSteps;i++){var $progressBarStep=$(".step-"+i);if($progressBarStep!==null){var progressBarStepWidth=Math.floor((i-1)*alignFactor/(totalSteps-1));$progressBarStep.css({left:progressBarStepWidth+"%"})}}};$(function(){if($(".progress-bar-list").length<1){return toggleProgressBarClasses()}resizeProgressBar();$(window).on("resize",Foundation.utils.debounce(resizeProgressBar,250));var $stepMeter=$("#step-meter"),$stepMeterInner=$("#step-meter-inner"),$stepCounter=$("#step-counter"),progressStep=parseFloat($stepCounter.text()),currentStep=Math.floor(progressStep),steps=$(".progress-bar-list span.step-circle"),stepText=$(".progress-bar-list p.step-text"),widthIncrement=100/(steps.length-1),barStepWidth=widthIncrement*(progressStep-1),widthNeeded=(barStepWidth===100||barStepWidth===0)?barStepWidth:barStepWidth+1;for(var i=0;i<currentStep-1;i++){$(steps[i]).addClass("done")}$(steps[currentStep-1]).addClass("active");$(stepText[currentStep-1]).addClass("active");if(progressStep>currentStep){var innerMargin=(widthIncrement*(currentStep-1)/barStepWidth)*100;$stepMeterInner.css({display:"block","margin-left":innerMargin+"%"})}$stepMeter.attr("style","width:"+widthNeeded+"%")});setTimeout(function(){var step_cur=$("#step-counter");cur_num=parseFloat(step_cur.text());final_steps=Math.floor(cur_num);if(final_steps>3){if(final_steps==6){$("#step-meter-inner").removeClass("divider-b");$("#step-meter-inner").removeClass("divider-a")}if(final_steps==4){$("#step-meter-inner").addClass("divider-b")}if(final_steps==5){$("#step-meter-inner").addClass("divider-b");$("#step-meter-inner").addClass("divider-a")}}})})(jQuery);(function($){var container=$("body");var toggleHelpMenu=function(){var helpLink=$("#help-link, .help-dropdown_trigger");var helpMenu=$("#help-menu, .help-dropdown_content");container.on("click",".help-dropdown_trigger",function(){helpMenu.slideToggle();helpLink.toggleClass("clicked")})};var toggleLinkContent=function(){container.on("click",".expand-collapse-link",function(){var $this=$(this);var noJSAnimation=$this.data("noJsAnimation");if(noJSAnimation){$this.next(".expand-collapse-box").toggle()}else{$this.next(".expand-collapse-box").slideToggle()}$this.toggleClass("clicked");slideModal.size()});container.on("click",".info-link",function(){var $this=$(this);var infoLinkTarget=$($.trim($this.data("info-link-target")));if(infoLinkTarget.length<=0){infoLinkTarget=$this.parent().next(".info-box")}infoLinkTarget.slideToggle();$(".info-link-close").focus()});container.on("click",".info-link-close",function(){$(this).parent(".info-box").slideToggle();$(".info-link").focus()})};var toggleLinkMultiPage=function(){container.on("click",".expand-collapse-link-multipage",function(){var $this=$(this);var noJSAnimation=$this.data("noJsAnimation");if(noJSAnimation){$(".expand-collapse-box-multipage").toggle()}else{$(".expand-collapse-box-multipage").slideToggle()}$this.toggleClass("clicked");slideModal.size()})};$(function(){toggleHelpMenu();toggleLinkContent();toggleLinkMultiPage()})})(jQuery);var performInputScroll=true;(function scrollInputIntoView($){$(document).on("click focus","input, select",function(){var fieldTop=$(this).offset().top;var fieldBottom=fieldTop+$(this).height();var scrollTop=$(window).scrollTop();var docBottom=scrollTop+$(window).height();if(performInputScroll){if(fieldTop>=(docBottom-50)){var diffspace=fieldBottom-docBottom;$("html, body").animate({scrollTop:(scrollTop+diffspace+150)})}if(fieldTop<=($(window).scrollTop()+75)){$("html, body").animate({scrollTop:(scrollTop-75)})}}})})(jQuery);(function($,window){var stickyElements,floatingChat;var $window=$(window);var touchScrolling;if(/webkit.*mobile/i.test(navigator.userAgent)){document.addEventListener("touchmove",function(e){var touch=e.touches[0];touchScrolling=true},false);document.addEventListener("touchend",function(e){var touch=e.touches[0];touchScrolling=false},false);window.onresize=function(){if(touchScrolling){var currentLocation=window.scrollY;scrollTo(0,currentLocation-1);scrollTo(0,currentLocation)}}}var scrollCallback=Foundation.utils.throttle(function(){stickyElements.each(function(){var $this=$(this);var offsetTop=parseFloat($this.data("offset-top")(),10);if(/webkit.*mobile/i.test(navigator.userAgent)){if($this.hasClass("header_title-bar")&&$this.hasClass("show-for-medium-down")){offsetTop=window.scrollY}}if($window.scrollTop()>=offsetTop&&$window.scrollTop()>$(".header_branding-bar").height()){$this.addClass("fixed")}else{$this.removeClass("fixed")}})},2);var positionFloatingChat=function(){var offset=0;var pageOffset=$(".page-container").offset().left;var fixedChat=$(".floating-chat.fixed");if(fixedChat.length){if(pageOffset>10){offset=pageOffset-10}fixedChat.css("right",offset)}else{$(".floating-chat").css("right",-20)}};var positionFloatingChatWhenReady=function(){$(".floating-chat").css("visibility","hidden");if(floatingChat.find("img").length){$(".floating-chat").css("visibility","visible");positionFloatingChat()}else{setTimeout(positionFloatingChatWhenReady,250)}};var setOffset=function(stickyElement){if(stickyElement.hasClass("consent")||stickyElement.hasClass("personalInfoButtons")){stickyElement.data("offset-top",function(){return $("#creditCardTnCAnchor").offset().top+2100})}else{stickyElement.data("offset-top",function(){return stickyElement.offset().top})}};$(function(){stickyElements=$(".sticky-element");floatingChat=$(".floating-chat");if(stickyElements.length){stickyElements.each(function(){setOffset($(this))});$("[data-responsive-image]").on("setSource",function(){setOffset($(this))});$window.on("resize scroll",scrollCallback)}if(floatingChat.length){positionFloatingChatWhenReady();$(window).on("resize scroll",Foundation.utils.throttle(positionFloatingChat,125))}})})(jQuery,window);(function($){var watchIframeHeight=function(){var skwFrame=$(".abpaSkw iframe");skwFrame.attr("width","100%");if(skwFrame.length){var prevframeHeight=0;setInterval(function(){var frameHeight=parseInt(skwFrame[0].contentWindow.document.body.offsetHeight,10);if(frameHeight>prevframeHeight){skwFrame.height(frameHeight);prevframeHeight=frameHeight}},500)}};$(window).on("load",function(){setTimeout(watchIframeHeight,500)})})(jQuery);var timeoutModule=(function(window){var timer;var start=function(){timer=setTimeout(function(){window.location="/applynow/invalidate-session.go"},1000*60*15)};var stop=function(){clearTimeout(timer)};return{start:start,stop:stop}})(window);var vipaaModule=(function($){var vipaaFormSubmitted=false;$(".enroll_olb_new, .enroll_olb_exist_d, .enroll_olb_exist_m").click(function(event){event.preventDefault()});var performVipaaPost=function(){setTimeout(function(){if(!vipaaFormSubmitted){var arForm=document.getElementById("vipaaOLBPostForm");arForm.submit();vipaaFormSubmitted=true}},3000);return false};var performEnrollNowButtonHide=function(butClass){var url=$("."+butClass).attr("href");window.location.href=url};return{performVipaaPost:performVipaaPost,performEnrollNowButtonHide:performEnrollNowButtonHide}})(jQuery);var slideModal=(function($,window){var slideModalEl,scrollTop,$window,$body;var throttle=1000;var lastIteration=0;if(typeof zWatch!="undefined"){zWatch.listen({onResponse:{onResponse:function(){if(slideModalEl){return}setTimeout(function(){if($(".slide-modal").length){slideModalEl=$(".slide-modal");slideModalEl.find(".z-window-modal-tl-noborder, .z-window-modal-bl-noborder").remove();slideModalEl.add(".z-modal-mask").attr("style","").wrapAll('<div class="slide-modal-container">');slideModalEl.parents(".slide-modal-container").prev("iframe").remove();slideModalEl.parents(".slide-modal-container").next("iframe").remove();showSlideModal()}},100)}}})}var showSlideModal=function(){var bottomBar=slideModalEl.find(".fixed-bottom-bar");if(bottomBar.length&&bottomBar.is(":visible")){bottomBar.detach().appendTo(slideModalEl)}setTimeout(function(){$window=$window||$(window);$body=$body||$("body");slideModalEl.find(".button-close:visible:first").focus();slideModalEl.addClass("visible");$body.css("overflow","hidden");if(Foundation.utils.is_large_up()){$body.css("padding-right",17)}else{scrollTop=$window.scrollTop();$body.css({position:"fixed",width:"100%"})}slideModalSize();setTimeout(function(){slideModalEl.foundation("reflow")},1000);slideModalEl.add(".z-window-modal-cnt-noborder").scrollTop(0);$window.trigger("slidemodalOpened");unblockUI();slideModalEl.on("click.slideModal",".slide-modal-close",slideModalClose);slideModalEl.on("click.slideModal",'a[href^="#"]',function(e){e.preventDefault();var target=$(this).attr("href");var targetEl=slideModalEl.find(target);if(targetEl.length){slideModalEl.add(".z-window-modal-cnt-noborder").scrollTop(targetEl.position().top);return false}targetEl=$body.find(target).add('a[name="'+target.slice(1)+'"]');if(targetEl.length){scrollTop=targetEl.offset().top-60;slideModalClose();$(window).one("slidemodalClosed.slideModal",function(){location.assign(target)})}return true})},1)};var slideModalFrontEnd=function(e){e.preventDefault();var $this=$(this);var content=$($this.attr("data-target"));if(content.length){slideModalEl=$('<div class="slide-modal z-window-modal"><div class="z-window-modal-cl-noborder"><div class="z-window-modal-cr-noborder"><div class="z-window-modal-cm-noborder"><div class="z-window-modal-cnt-noborder">'+content.html()+"</div></div></div></div></div>");slideModalEl.appendTo("body").wrap('<div class="slide-modal-container">');$(".slide-modal-container").prepend('<div class="z-modal-mask"/>');showSlideModal()}};var slideModalClose=function(e){var slideModalContainer=$(".slide-modal-container");$window=$window||$(window);$body=$body||$("body");if(!slideModalEl){if(slideModalContainer){slideModalContainer.remove()}return}if(slideModalContainer){slideModalContainer.prev("iframe").remove();slideModalContainer.next("iframe").remove()}slideModalEl.removeClass("visible");var zkWindow=zk.Widget.$(slideModalEl[0].id);if(zkWindow){zkWindow.detach()}if(e){$(e.delegateTarget).off("click.slideModal",slideModalClose);$(e.target).trigger(e)}setTimeout(function(){slideModalContainer.remove()},100);$body.css("overflow","auto");if(Foundation.utils.is_large_up()){$body.css("padding-right",0)}else{$body.css({position:"relative",transform:"none",width:"auto"});setTimeout(function(){$body.scrollTop(scrollTop)})}slideModalEl=undefined;$(window).trigger("slidemodalClosed")};if($("a[href='#creditCardTnCAnchor']").length>0){$(window).resize(function(){var width=$(window).width();if(width>1024){responsiveAppModule.slideModalClose();$("body").css({overflow:"auto",position:"relative"})}})}var slideModalSize=function(){var slideModalEl=$(".slide-modal");var now=new Date().getTime();if(!slideModalEl.length||(lastIteration+throttle)>now){return}lastIteration=now;var screenH=$window.height();var paddingV=parseFloat(slideModalEl.css("padding-top"))+parseFloat(slideModalEl.css("padding-bottom"));var slideModalH=slideModalEl.outerHeight();var bottomBar=slideModalEl.find(".fixed-bottom-bar");if(bottomBar.length&&bottomBar.is(":visible")){var content=slideModalEl.find(".z-window-modal-cm-noborder");var bottomBarHeight=bottomBar.outerHeight();content.height(screenH-bottomBarHeight);setTimeout(function(){window.scrollBy(0,1)},10)}setTimeout(function(){$(".z-modal-mask").height(slideModalH+(paddingV*3))},250)};var scrollSlideModal=function(selector){$(window).one("slidemodalOpened.slideModal",function(){var slideModalEl=$(".slide-modal");if(slideModalEl){slideModalEl.add(".z-window-modal-cnt-noborder").scrollTop($(selector,slideModalEl).position().top)}})};$(function(){$window=$window||$(window);$body=$body||$("body");$window.on("resize.slideModal orientationchange.slideModal",function(){setTimeout(slideModalSize,100)});$(".slide-modal-launch").on("click.slideModal",slideModalFrontEnd)});return{scroll:scrollSlideModal,close:slideModalClose,size:slideModalSize}})(jQuery,window);var responsiveAppModule=responsiveAppModule||{};responsiveAppModule.slideModalClose=slideModal.close;responsiveAppModule.scrollSlideModal=slideModal.scroll;var responsiveImages=(function($,window){var init=function(responsiveImages){if(!responsiveImages){responsiveImages=$("[data-responsive-image]")}responsiveImages.each(function(){var $this;var responsiveImageSources;var imageSources={};if(this instanceof jQuery){$this=this}else{$this=$(this)}responsiveImageSources=$this.data("responsive-image");if(typeof responsiveImageSources!=="string"){return true}$.each($this.data("responsive-image").split(","),function(){var src=$.map(this.split("="),$.trim);if($.inArray("",src)==-1){imageSources[src[0]]=src[1]}});$this.data("responsive-image",imageSources);setSrc($this);$this.attr("data-responsive-image-initiated",true)})};var change=function(selector,imageSources){var responsiveImages=$(selector);if(responsiveImages){responsiveImages.each(function(){var $this=$(this);$this.data("responsive-image",imageSources);setSrc($this)})}};var setSrc=function(image){if(!image instanceof jQuery){image=$(image)}var src;var currentBreakpoint=utils.getCurrentBreakpoint();var imageSources=image.data("responsive-image");src=imageSources[currentBreakpoint];if(!src){if(currentBreakpoint=="small"&&imageSources.medium){src=imageSources.medium}else{src=imageSources.large}}image.attr("src",src);$(document).foundation("reflow");image.trigger("setSource")};var $window=$(window);$window.on("slidemodalOpened",function(){var slideModal=$(".slideModal");if(slideModal){init()}});$window.on("resize",Foundation.utils.debounce(function(){$("[data-responsive-image-initiated]").each(function(){setSrc($(this))})},250));init($("[data-responsive-image]"));return{change:change,init:init}})(jQuery,window);var mobileAppLink=(function($,utils){var $cta=$("#appCTA");function setLink(){if($cta.length){switch(utils.getDeviceType()){case"ipad":$cta.attr("href","http://itunes.apple.com/us/app/bank-of-america-for-ipad/id433508740?mt=8&ls=1");$cta.attr("name","HowToBankning_With_iPad");break;case"iphone":$cta.attr("href","http://itunes.apple.com/us/app/bank-america-mobile-banking/id284847138?mt=8");$cta.attr("name","HowToBankning_With_iPhone");break;case"android":$cta.attr("href","https://play.google.com/store/apps/details?id=com.infonow.bofa");$cta.attr("name","HowToBankning_With_Android");break;default:$cta.attr("href","https://www.bankofamerica.com/online-banking/mobile.go");$cta.attr("name","HowToBankning_With_Mobile")}}}$(function(){setLink()});return{refresh:setLink}})(jQuery,utils);(function($,window){var campaignInfo,info;var robustHeadersHandlers=function(){$(".robust-header .tabs").on("toggled",function(){$(document).foundation({equalizer:{act_on_hidden_el:true,equalize_on_stack:true}})});$("[data-proxy-click]").on("click",function(e){e.preventDefault();var target=$(this).attr("data-proxy-click");if(target){$(target)[0].click()}})};$(function(){campaignInfo=$("#robust-campaign-info");campaignInfo.hide();info=$(".robust-header-info");if(Foundation.utils.is_large_up()){info.hide().html(campaignInfo.html())}info.foundation({equalizer:{act_on_hidden_el:true,equalize_on_stack:true}});$(".page-container").on("click",".robust-header_show-more",function(e){e.preventDefault();$(this).toggleClass("clicked");info.slideToggle()});robustHeadersHandlers();$(window).on("slidemodalOpened",function(){setTimeout(robustHeadersHandlers,250)})})})(jQuery,window);(function($,window,utils){var utils=utils||{};var pattern=/(min|max):\s*(\d+)/i;var getResolution=function(){var resolution=96;var checkPoints=[3,2,1.5,1.25];if(typeof(matchMedia)!=="function"){return resolution}if(window.devicePixelRatio==2&&utils.getDeviceType()=="ipad"&&getDiagonal()==1280){return 163}if(window.devicePixelRatio){return resolution*window.devicePixelRatio}for(var i=0;i<checkPoints.length;i++){var ratio=checkPoints[i];var mediaQueryPattern="(-webkit-min-device-pixel-ratio: %), (min-resolution: %%dpi), (min-resolution: %dppx)";var mediaQuery=mediaQueryPattern.replace("%",ratio).replace("%%",ratio*96);if(window.matchMedia&&window.matchMedia(mediaQuery).matches){return(ratio*resolution)}}return resolution};utils.getResolution=getResolution;var getDiagonal=function(){var w=parseFloat(window.screen.width,10);var h=parseFloat(window.screen.height,10);return Math.sqrt(Math.pow(w,2)+Math.pow(h,2))};utils.getDiagonal=getDiagonal;var evaluateDisplayRule=function(rule,subject){var info=rule.match(pattern);if(info.length){if(info[1].toLowerCase()==="max"){return subject<info[2]}if(info[1].toLowerCase()==="min"){return subject>info[2]}}return null};var updateDisplayRules=function(){var elements=$("[data-screen-size-visible]");var diagonal=getDiagonal()/getResolution();var show=[];var hide=[];elements.each(function(){var rule=$(this).attr("data-screen-size-visible");var evaluation=evaluateDisplayRule(rule,diagonal);if(evaluation===null){return true}if(evaluation){show.push(this)}else{hide.push(this)}});$(show).show();$(hide).hide()};$(function(){updateDisplayRules();$(window).on("resize",updateDisplayRules)})})(jQuery,window,utils);(function($,window){var FileApiSupported=!!("File" in window&&"FileReader" in window&&"FileList" in window&&"Blob" in window);$invalidFileSize=$(".invalidFileSize");$invalidFileType=$(".invalidFileType");$filename=$(".filename");function validateFileSize(file,size){if(FileApiSupported){if(file.size/1000000>size){return false}else{return true}}return true}function validateFileType(file,acceptablefiles){if(FileApiSupported){function MIMECheck(hexsignature){validfilemime=null;acceptablefiles.split(/\s*,\s*/).forEach(function(filetype){switch(filetype.toLowerCase()){case"image/bmp":if(hexsignature=="424d"||hexsignature=="ffd8"){validfilemime=true}break;case"image/jpg":if(hexsignature=="424d"||hexsignature=="ffd8"){validfilemime=true}break;case"image/jpeg":if(hexsignature=="424d"||hexsignature=="ffd8"){validfilemime=true}break;case"image/png":if(hexsignature=="8950"){validfilemime=true}break;case"image/tiff":if(hexsignature=="4949"||hexsignature=="4d4d"){validfilemime=true}break;case"image/tif":if(hexsignature=="4949"||hexsignature=="4d4d"){validfilemime=true}break;case"image/*":if(hexsignature=="424d"||hexsignature=="ffd8"){validfilemime=true}if(hexsignature=="8950"){validfilemime=true}if(hexsignature=="4949"||hexsignature=="4d4d"){validfilemime=true}break;case"application/pdf":if(hexsignature=="2550"){validfilemime=true}break;default:validfilemime=false}});return validfilemime}var fileReader=new FileReader();fileReader.onloadend=function(e){var arr=(new Uint8Array(e.target.result)).subarray(0,4);var hexsignature="";for(var i=0;i<arr.length;i++){hexsignature+=arr[i].toString(16)}var mimecheck=MIMECheck(hexsignature.toLowerCase().replace(/\s+/g,"").substring(0,4));if(mimecheck){$invalidFileType.addClass("hide");$filename.removeClass("badfile")}else{$invalidFileType.removeClass("hide");$filename.addClass("badfile")}};fileReader.readAsArrayBuffer(file)}return true}$('input[type="file"]').change(function(){if($(this).val().length>0){$(".servererror").remove();var fileExtension=$(this).val().substr($(this).val().length-4).toLowerCase();$invalidFileType.addClass("hide");$filename.removeClass("badfile");if(fileExtension==".bmp"||fileExtension==".jpg"||fileExtension=="jpeg"||fileExtension==".pdf"||fileExtension==".png"||fileExtension==".tif"||fileExtension=="tiff"){if($(this).get(0).files!==null&&$(this).get(0).files!==undefined){if(!validateFileSize($(this).get(0).files[0],$(this).data("maxfilesize"))){$invalidFileType.addClass("hide");$(".invalidFileSize").removeClass("hide");$filename.addClass("badfile")}else{$invalidFileSize.addClass("hide");$filename.removeClass("badfile");validateFileType($(this).get(0).files[0],$(this).attr("accept"))}}else{$invalidFileSize.addClass("hide")}}else{$invalidFileType.removeClass("hide");$filename.addClass("badfile")}$(".choosefile").addClass("hide");$(".uploadfile").removeClass("hide");var newFileName=$(this).val().split("/").pop().split("\\").pop();if(newFileName.length>40){newFileName="..."+newFileName.slice(newFileName.length-40)}$filename.text(newFileName);$(this).clone(true).insertAfter($(this));$(".inputSelectAFile.chosenfile").remove();$(".choosefile .inputSelectAFile").first().insertAfter(".choosefile").css("visibility","hidden").addClass("chosenfile").attr("name","uploadedFile")}window.focus()});$(".changefile").click(function(){$(".choosefile input").trigger("click")});setTimeout(function(){$wrapform=$(".wrapform");if($wrapform.length>0){$wrapform.wrap("<form style='margin:0;' class='uploadForm' name='uploadForm' method='' enctype='' action=''></form>");$(".uploadForm").attr("method",$wrapform.data("formmethod")).attr("enctype",$wrapform.data("formenctype")).attr("action",$wrapform.data("formaction")).submit(function(){blockUI("processing-modal","Uploading your file")})}},300)})(jQuery,window);(function($){var inputs;var addCounter=function(){inputs.each(function(){var $this=$(this);if($this.attr("id")===""){return true}var limit=parseInt(zk.Widget.$($this.attr("id"))._maxlength,10);if(!limit){return true}var remaining=limit-$this.val().length;$this.data("characterLimit",limit);var charCounter=$('<div class="c3 right char-count"/>');charCounter.html('<span class="char-limit">'+remaining+"</span> characters remaining");if(limit>=100&&remaining>100){charCounter.hide()}$this.after(charCounter)})};var countChars=function(){var $this=$(this);var counter=$this.next(".char-count");var count=$this.val().length;var limit=$this.data("characterLimit");if(count>=limit-100){counter.show().children(".char-limit").text(limit-count)}};$(function(){inputs=$(".count-chars");if(inputs.length){$("body").on("input",".count-chars",countChars);addCounter()}})})(jQuery);var combobox=(function($){var init=function(){var select=$(this);var field=$('<input type="text" class="combobox-input" role="presentation">');field.data("select-id",select.attr("id"));var list=$('<ul class="auto-complete-list" tabindex="-1" role="listbox" aria-expanded="true"></ul>');select.find("option").each(function(){var $this=$(this);var label=$this.text();if(label){var item=$('<li role="option">'+label+"</li>");item.data("value",$this.val());if($this.prop("selected")){field.val(label)}if($this.hasClass("persistent")){item.addClass("persistent")}list.append(item)}});updateField.call(this);select.before(field,list).removeClass(".abpa-listbox").attr("tabindex","-1");select.parent().addClass("auto-complete")};var updateField=function(){var select=$(this);var field=select.siblings(".combobox-input");var val=select.val();field.val("");if(val){field.val(select.find('option[value="'+val+'"]').text())}};var activate=function(){var $this=$(this);xrComponentsModule.applyActiveStyles($this.data("select-id"))};var deactivate=Foundation.utils.debounce(function(){var $this=$(this);var list=$this.siblings(".auto-complete-list");var select=$this.siblings("select");var val=$this.val();if(val){var selected=list.find("li").filter(":contains("+val+")").data("value");if(!selected){$this.val("")}select.val(selected)}else{select.val("")}zk.Widget.$(select.attr("id")).doBlur_()},250);var refresh=function(selector){updateField.call(document.querySelectorAll(selector))};var refreshAll=function(){$(".combobox").each(updateField)};$(function(){$(".combobox").each(init);$("body").on({focusin:activate,focusout:deactivate},".combobox-input")});return{refresh:refresh,refreshAll:refreshAll}})(jQuery);var tuncatedList=(function($){var setup=function(){var select=$(this);var zkWidget=zk.Widget.$(select.attr("id"));var initialOptions=select.data("initialOptions");if(!initialOptions){return}var label=select.data("listModalHeading");if(!label){label=select.prev("label").html()}$options=select.find("option");var $modal=$('<div class="truncated-list-options z-window-modal hide"></div>');$modal.append('<div class="heading c7 mb-20">'+label+'<a class="remove-link button-close right" href="javascript:void(0);"></a></div>');var moreOptionsUL='<ul class="more-options">';$options.each(function(){var $option=$(this);if($option.val()&&$option.text()){moreOptionsUL+='<li><a href="#" data-value="'+$option.val()+'" data-id="'+$option.attr("id")+'">'+$option.text()+"</a></li>"}});moreOptionsUL+="</ul>";$modal.append(moreOptionsUL);$("body").append($modal);select.hide().attr("tab-index","-1");var truncatedSelect=$('<select rel="#'+select.attr("id")+'" class="truncated-select" id="'+select[0].id+'-trunc"></select>');truncatedSelect.append("<option></option>");$.each(initialOptions,function(key,label){truncatedSelect.append('<option value="'+key+'">'+label+"</option>")});var selected=select.find("option:selected");if(selected.length&&selected.val().length){var existing=truncatedSelect.find('option[value="'+selected.val()+'"]');if(!existing.length){truncatedSelect.append('<option value="'+selected.val()+'" selected>'+selected.text()+"</option>")}else{truncatedSelect.val(selected.val())}}truncatedSelect.append('<option value="see-more">'+select.data("truncateText")+"</option>");select.after(truncatedSelect);var origSelectItem=zkWidget.selectItem;zkWidget.selectItem=function(item){origSelectItem.apply(zkWidget,arguments);truncatedSelect.val($("#"+item.uuid).val())};$("body").on("click",".more-options a",function(e){var selection=$(e.target);var optVal=selection.attr("data-value");var optId=selection.attr("data-id");var existingOpt=truncatedSelect.find('option[value="'+optVal+'"]');if(!existingOpt.length){truncatedSelect.find("option:last-child").before('<option value="'+optVal+'" id="'+optId+'">'+selection.text()+"</option>")}select.val(optVal);truncatedSelect.val(optVal);select.data("prev-value",select.val());$(".truncated-list-options").addClass("hide");unblockUI();zkWidget.doBlur_();return false});$("body").on("click",".truncated-list-options .remove-link",function(e){truncatedSelect.val(select.data("prev-value"));zkWidget.doBlur_();$(".truncated-list-options").addClass("hide");unblockUI();return false})};var checkForMore=function(e){var $this=$(this);var selectId=$this.attr("rel");var $select=$(selectId);xrComponentsModule.applyActiveStyles(selectId.substring(1));if($this.val()=="see-more"){blockUI();$(".truncated-list-options").removeClass("hide").css({"z-index":$(".block-ui").css("z-index")+1}).find(".remove-link").focus();$select.val($select.data("prev-value")).change();xrComponentsModule.applyActiveStyles(this.id);return false}else{$select.val($this.val()).change();$select.data("prev-value",$this.val());zk.Widget.$($select.attr("id")).doBlur_()}};var doZKBlur=function(e){if($(this).val()!="see-more"){zk.Widget.$(e.target.id).doBlur_()}};$(function(){$("[data-initial-options]").each(setup);$("body").on("change",".truncated-select",checkForMore);$("body").on("blur",".truncated-select",doZKBlur)})})(jQuery);